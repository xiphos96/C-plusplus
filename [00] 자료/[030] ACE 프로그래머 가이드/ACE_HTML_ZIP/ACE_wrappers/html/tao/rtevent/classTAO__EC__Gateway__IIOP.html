<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>TAO_EC_Gateway_IIOP class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>TAO_EC_Gateway_IIOP  Class Reference</h1>Event Channel Gateway using <a class="elRef" doxygen="TAO.tag:../" href="../namespaceIIOP.html">IIOP</a>. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;EC_Gateway.h&gt;</code>
<p>
Inheritance diagram for TAO_EC_Gateway_IIOP:<p><center><img src="classTAO__EC__Gateway__IIOP__inherit__graph.gif" border="0" usemap="#TAO__EC__Gateway__IIOP__inherit__map" alt="Inheritance graph"></center>
<map name="TAO__EC__Gateway__IIOP__inherit__map">
<area href="classTAO__EC__Gateway__Sched.html" shape="rect" coords="14,153,179,172" alt="">
<area href="classTAO__EC__Gateway.html" shape="rect" coords="35,15,158,33" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for TAO_EC_Gateway_IIOP:<p><center><img src="classTAO__EC__Gateway__IIOP__coll__graph.gif" border="0" usemap="#TAO__EC__Gateway__IIOP__coll__map" alt="Collaboration graph"></center>
<map name="TAO__EC__Gateway__IIOP__coll__map">
<area href="classTAO__EC__Gateway.html" shape="rect" coords="338,7,461,26" alt="">
<area href="structRtecEventChannelAdmin_1_1ConsumerQOS.html" shape="rect" coords="274,65,525,83" alt="">
<area doxygen="ACE.tag:../../ace/" href="../../ace/classACE__Map__Manager.html" shape="rect" coords="25,133,774,151" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classTAO__EC__Gateway__IIOP-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#a0">TAO_EC_Gateway_IIOP</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#a1">~TAO_EC_Gateway_IIOP</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#a2">init</a> (RtecEventChannelAdmin::EventChannel_ptr rmt_ec, RtecEventChannelAdmin::EventChannel_ptr lcl_ec <a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a35">ACE_ENV_ARG_DECL</a>)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>To do its job this class requires to know the local and remote ECs it will connect to,.</em> <a href="#a2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#a3">disconnect_push_supplier</a> (<a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a39">ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS</a>)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The channel is disconnecting.</em> <a href="#a3">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#a4">disconnect_push_consumer</a> (<a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a39">ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS</a>)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The channel is disconnecting.</em> <a href="#a4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#a5">push</a> (const <a class="el" href="namespaceRtecEventComm.html#a4">RtecEventComm::EventSet</a> &amp;events <a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a36">ACE_ENV_ARG_DECL_WITH_DEFAULTS</a>)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>This is the Consumer side behavior, it pushes the events to the local event channel.</em> <a href="#a5">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#a6">shutdown</a> (<a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a39">ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS</a>)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Disconnect and shutdown the gateway.</em> <a href="#a6">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#a7">close</a> (<a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a39">ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS</a>)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The gateway must disconnect from all the relevant event channels, or any other communication media (such as multicast groups).</em> <a href="#a7">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#a8">update_consumer</a> (const <a class="el" href="structRtecEventChannelAdmin_1_1ConsumerQOS.html">RtecEventChannelAdmin::ConsumerQOS</a> &amp;sub <a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a36">ACE_ENV_ARG_DECL_WITH_DEFAULTS</a>)  throw (CORBA::SystemException)</td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#a9">update_supplier</a> (const <a class="el" href="structRtecEventChannelAdmin_1_1SupplierQOS.html">RtecEventChannelAdmin::SupplierQOS</a> &amp;pub <a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a36">ACE_ENV_ARG_DECL_WITH_DEFAULTS</a>)  throw (CORBA::SystemException)</td></tr>
<tr><td colspan=2><br><h2>Protected Types</h2></td></tr>
<tr><td nowrap align=right valign=top>typedef <a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/classACE__Map__Manager.html">ACE_Map_Manager</a>&lt; <a class="el" href="namespaceRtecEventComm.html#a2">RtecEventComm::EventSourceID</a>,<br>
 RtecEventChannelAdmin::ProxyPushConsumer_ptr,<br>
 <a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/classACE__Null__Mutex.html">ACE_Null_Mutex</a> &gt;&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#t0">Consumer_Map</a></td></tr>
<tr><td nowrap align=right valign=top>typedef <a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/classACE__Map__Iterator.html">ACE_Map_Iterator</a>&lt;<br>
 <a class="el" href="namespaceRtecEventComm.html#a2">RtecEventComm::EventSourceID</a>,<br>
 RtecEventChannelAdmin::ProxyPushConsumer_ptr,<br>
 <a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/classACE__Null__Mutex.html">ACE_Null_Mutex</a> &gt;&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#t1">Consumer_Map_Iterator</a></td></tr>
<tr><td colspan=2><br><h2>Protected Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#b0">init_i</a> (RtecEventChannelAdmin::EventChannel_ptr rmt_ec, RtecEventChannelAdmin::EventChannel_ptr lcl_ec <a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a35">ACE_ENV_ARG_DECL</a>)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Do the real work in <a class="el" href="classTAO__EC__Gateway__IIOP.html#a2">init</a>().</em> <a href="#b0">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Protected Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="elRef" doxygen="TAO.tag:../" href="../orbconf_8h.html#a2">TAO_SYNCH_MUTEX</a>&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#n0">lock_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Lock to synchronize internal changes.</em> <a href="#n0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="elRef" doxygen="TAO.tag:../" href="../namespaceCORBA.html#a11">CORBA::ULong</a>&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#n1">busy_count_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>How many threads are running <a class="el" href="classTAO__EC__Gateway__IIOP.html#a5">push</a>() we cannot make changes until that reaches 0.</em> <a href="#n1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#n2">update_posted_</a></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="structRtecEventChannelAdmin_1_1ConsumerQOS.html">RtecEventChannelAdmin::ConsumerQOS</a>&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#n3">c_qos_</a></td></tr>
<tr><td nowrap align=right valign=top>RtecEventChannelAdmin::EventChannel_var&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#n4">rmt_ec_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The remote and the local EC, so we can reconnect when the list changes.</em> <a href="#n4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>RtecEventChannelAdmin::EventChannel_var&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#n5">lcl_ec_</a></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="namespaceRtecBase.html#a0">RtecBase::handle_t</a>&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#n6">rmt_info_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Our local and remote RT_Infos.</em> <a href="#n6">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="namespaceRtecBase.html#a0">RtecBase::handle_t</a>&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#n7">lcl_info_</a></td></tr>
<tr><td nowrap align=right valign=top>ACE_PushConsumer_Adapter&lt;<br>
 TAO_EC_Gateway_IIOP &gt;&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#n8">consumer_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Our consumer personality.... If it is not 0 then we must deactivate the supplier.</em> <a href="#n8">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#n9">consumer_is_active_</a></td></tr>
<tr><td nowrap align=right valign=top>ACE_PushSupplier_Adapter&lt;<br>
 TAO_EC_Gateway_IIOP &gt;&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#n10">supplier_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Our supplier personality.... If it is not 0 then we must deactivate the supplier.</em> <a href="#n10">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#n11">supplier_is_active_</a></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classTAO__EC__Gateway__IIOP.html#t0">Consumer_Map</a>&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#n12">consumer_proxy_map_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>We talk to the EC (as a supplier) using either an per-supplier proxy or a generic proxy for the type only subscriptions.</em> <a href="#n12">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>RtecEventChannelAdmin::ProxyPushConsumer_var&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#n13">default_consumer_proxy_</a></td></tr>
<tr><td nowrap align=right valign=top>RtecEventChannelAdmin::ProxyPushSupplier_var&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#n14">supplier_proxy_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>We talk to the EC (as a consumer) using this proxy.</em> <a href="#n14">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Private Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#c0">close_i</a> (<a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a40">ACE_ENV_SINGLE_ARG_DECL_NOT_USED</a>)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__EC__Gateway__IIOP.html#c1">update_consumer_i</a> (const <a class="el" href="structRtecEventChannelAdmin_1_1ConsumerQOS.html">RtecEventChannelAdmin::ConsumerQOS</a> &amp;sub <a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a35">ACE_ENV_ARG_DECL</a>)</td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Event Channel Gateway using <a class="elRef" doxygen="TAO.tag:../" href="../namespaceIIOP.html">IIOP</a>.
<p>

<p>
 This class mediates among two event channels, it connects as a consumer of events with a remote event channel, and as a supplier of events with the local EC. As a consumer it gives a QoS designed to only accept the events in which *local* consumers are interested. Eventually the local EC should create this object and compute its QoS in an automated manner; but this requires some way to filter out the peers registered as consumers, otherwise we will get loops in the QoS graph. It uses exactly the same set of events in the publications list when connected as a supplier.
<p>
<dl compact><dt><b>
Note: </b><dd>
 An alternative implementation would be to register with the remote EC as a supplier, and then filter on the remote EC, but one of the objectives is to minimize network traffic. On the other hand the events will be pushed to remote consumers, event though they will be dropped upon receipt (due to the TTL field); IMHO this is another suggestion that the EC needs to know (somehow) which consumers are truly its peers in disguise.</dl><dl compact><dt><b>
<a class="el" href="todo.html#_todo000002">Todo: </a></b><dd>
: The class makes an extra copy of the events, we need to investigate if closer collaboration with its collocated EC could be used to remove that copy. </dl> 
<p>
<hr><h2>Member Typedef Documentation</h2>
<a name="t0" doxytag="TAO_EC_Gateway_IIOP::Consumer_Map"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef <a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/classACE__Map__Manager.html">ACE_Map_Manager</a>&lt;<a class="el" href="namespaceRtecEventComm.html#a2">RtecEventComm::EventSourceID</a>,RtecEventChannelAdmin::ProxyPushConsumer_ptr,<a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/classACE__Null__Mutex.html">ACE_Null_Mutex</a>&gt; TAO_EC_Gateway_IIOP::Consumer_Map<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="t1" doxytag="TAO_EC_Gateway_IIOP::Consumer_Map_Iterator"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef <a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/classACE__Map__Iterator.html">ACE_Map_Iterator</a>&lt;<a class="el" href="namespaceRtecEventComm.html#a2">RtecEventComm::EventSourceID</a>,RtecEventChannelAdmin::ProxyPushConsumer_ptr,<a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/classACE__Null__Mutex.html">ACE_Null_Mutex</a>&gt; TAO_EC_Gateway_IIOP::Consumer_Map_Iterator<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="TAO_EC_Gateway_IIOP::TAO_EC_Gateway_IIOP"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> TAO_EC_Gateway_IIOP::TAO_EC_Gateway_IIOP </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a1" doxytag="TAO_EC_Gateway_IIOP::~TAO_EC_Gateway_IIOP"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> TAO_EC_Gateway_IIOP::~TAO_EC_Gateway_IIOP </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a7" doxytag="TAO_EC_Gateway_IIOP::close"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TAO_EC_Gateway_IIOP::close </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a39">ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The gateway must disconnect from all the relevant event channels, or any other communication media (such as multicast groups).
<p>

<p>
Reimplemented from <a class="el" href="classTAO__EC__Gateway.html#a2">TAO_EC_Gateway</a>.    </td>
  </tr>
</table>
<a name="c0" doxytag="TAO_EC_Gateway_IIOP::close_i"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TAO_EC_Gateway_IIOP::close_i </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a40">ACE_ENV_SINGLE_ARG_DECL_NOT_USED</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a4" doxytag="TAO_EC_Gateway_IIOP::disconnect_push_consumer"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TAO_EC_Gateway_IIOP::disconnect_push_consumer </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a39">ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The channel is disconnecting.
<p>
    </td>
  </tr>
</table>
<a name="a3" doxytag="TAO_EC_Gateway_IIOP::disconnect_push_supplier"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TAO_EC_Gateway_IIOP::disconnect_push_supplier </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a39">ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The channel is disconnecting.
<p>
    </td>
  </tr>
</table>
<a name="a2" doxytag="TAO_EC_Gateway_IIOP::init"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TAO_EC_Gateway_IIOP::init </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">RtecEventChannelAdmin::EventChannel_ptr&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>rmt_ec</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>RtecEventChannelAdmin::EventChannel_ptr lcl_ec&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ACE_ENV_ARG_DECL</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
To do its job this class requires to know the local and remote ECs it will connect to,.
<p>
    </td>
  </tr>
</table>
<a name="b0" doxytag="TAO_EC_Gateway_IIOP::init_i"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TAO_EC_Gateway_IIOP::init_i </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">RtecEventChannelAdmin::EventChannel_ptr&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>rmt_ec</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>RtecEventChannelAdmin::EventChannel_ptr lcl_ec&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ACE_ENV_ARG_DECL_NOT_USED</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Do the real work in <a class="el" href="classTAO__EC__Gateway__IIOP.html#a2">init</a>().
<p>
    </td>
  </tr>
</table>
<a name="a5" doxytag="TAO_EC_Gateway_IIOP::push"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TAO_EC_Gateway_IIOP::push </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="namespaceRtecEventComm.html#a4">RtecEventComm::EventSet</a> &amp;events&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>ACE_ENV_ARG_DECL</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This is the Consumer side behavior, it pushes the events to the local event channel.
<p>
    </td>
  </tr>
</table>
<a name="a6" doxytag="TAO_EC_Gateway_IIOP::shutdown"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int TAO_EC_Gateway_IIOP::shutdown </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a39">ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Disconnect and shutdown the gateway.
<p>
    </td>
  </tr>
</table>
<a name="a8" doxytag="TAO_EC_Gateway_IIOP::update_consumer"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> virtual void TAO_EC_Gateway_IIOP::update_consumer </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="structRtecEventChannelAdmin_1_1ConsumerQOS.html">RtecEventChannelAdmin::ConsumerQOS</a> &amp;sub&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>ACE_ENV_ARG_DECL_WITH_DEFAULTS</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap>  throw (<a class="elRef" doxygen="TAO.tag:../" href="../namespaceCORBA.html#a56">CORBA::SystemException</a>)<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="c1" doxytag="TAO_EC_Gateway_IIOP::update_consumer_i"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TAO_EC_Gateway_IIOP::update_consumer_i </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="structRtecEventChannelAdmin_1_1ConsumerQOS.html">RtecEventChannelAdmin::ConsumerQOS</a> &amp;sub&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>ACE_ENV_ARG_DECL</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a9" doxytag="TAO_EC_Gateway_IIOP::update_supplier"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> virtual void TAO_EC_Gateway_IIOP::update_supplier </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="structRtecEventChannelAdmin_1_1SupplierQOS.html">RtecEventChannelAdmin::SupplierQOS</a> &amp;pub&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>ACE_ENV_ARG_DECL_WITH_DEFAULTS</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap>  throw (<a class="elRef" doxygen="TAO.tag:../" href="../namespaceCORBA.html#a56">CORBA::SystemException</a>)<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="n1" doxytag="TAO_EC_Gateway_IIOP::busy_count_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="TAO.tag:../" href="../namespaceCORBA.html#a11">CORBA::ULong</a> TAO_EC_Gateway_IIOP::busy_count_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
How many threads are running <a class="el" href="classTAO__EC__Gateway__IIOP.html#a5">push</a>() we cannot make changes until that reaches 0.
<p>
    </td>
  </tr>
</table>
<a name="n3" doxytag="TAO_EC_Gateway_IIOP::c_qos_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structRtecEventChannelAdmin_1_1ConsumerQOS.html">RtecEventChannelAdmin::ConsumerQOS</a> TAO_EC_Gateway_IIOP::c_qos_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="n8" doxytag="TAO_EC_Gateway_IIOP::consumer_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_PushConsumer_Adapter&lt;TAO_EC_Gateway_IIOP&gt; TAO_EC_Gateway_IIOP::consumer_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Our consumer personality.... If it is not 0 then we must deactivate the supplier.
<p>
    </td>
  </tr>
</table>
<a name="n9" doxytag="TAO_EC_Gateway_IIOP::consumer_is_active_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int TAO_EC_Gateway_IIOP::consumer_is_active_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="n12" doxytag="TAO_EC_Gateway_IIOP::consumer_proxy_map_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classTAO__EC__Gateway__IIOP.html#t0">Consumer_Map</a> TAO_EC_Gateway_IIOP::consumer_proxy_map_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
We talk to the EC (as a supplier) using either an per-supplier proxy or a generic proxy for the type only subscriptions.
<p>
    </td>
  </tr>
</table>
<a name="n13" doxytag="TAO_EC_Gateway_IIOP::default_consumer_proxy_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> RtecEventChannelAdmin::ProxyPushConsumer_var TAO_EC_Gateway_IIOP::default_consumer_proxy_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="n5" doxytag="TAO_EC_Gateway_IIOP::lcl_ec_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> RtecEventChannelAdmin::EventChannel_var TAO_EC_Gateway_IIOP::lcl_ec_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="n7" doxytag="TAO_EC_Gateway_IIOP::lcl_info_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="namespaceRtecBase.html#a0">RtecBase::handle_t</a> TAO_EC_Gateway_IIOP::lcl_info_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="n0" doxytag="TAO_EC_Gateway_IIOP::lock_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="TAO.tag:../" href="../orbconf_8h.html#a2">TAO_SYNCH_MUTEX</a> TAO_EC_Gateway_IIOP::lock_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Lock to synchronize internal changes.
<p>
    </td>
  </tr>
</table>
<a name="n4" doxytag="TAO_EC_Gateway_IIOP::rmt_ec_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> RtecEventChannelAdmin::EventChannel_var TAO_EC_Gateway_IIOP::rmt_ec_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The remote and the local EC, so we can reconnect when the list changes.
<p>
    </td>
  </tr>
</table>
<a name="n6" doxytag="TAO_EC_Gateway_IIOP::rmt_info_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="namespaceRtecBase.html#a0">RtecBase::handle_t</a> TAO_EC_Gateway_IIOP::rmt_info_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Our local and remote RT_Infos.
<p>
    </td>
  </tr>
</table>
<a name="n10" doxytag="TAO_EC_Gateway_IIOP::supplier_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_PushSupplier_Adapter&lt;TAO_EC_Gateway_IIOP&gt; TAO_EC_Gateway_IIOP::supplier_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Our supplier personality.... If it is not 0 then we must deactivate the supplier.
<p>
    </td>
  </tr>
</table>
<a name="n11" doxytag="TAO_EC_Gateway_IIOP::supplier_is_active_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int TAO_EC_Gateway_IIOP::supplier_is_active_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="n14" doxytag="TAO_EC_Gateway_IIOP::supplier_proxy_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> RtecEventChannelAdmin::ProxyPushSupplier_var TAO_EC_Gateway_IIOP::supplier_proxy_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
We talk to the EC (as a consumer) using this proxy.
<p>
    </td>
  </tr>
</table>
<a name="n2" doxytag="TAO_EC_Gateway_IIOP::update_posted_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int TAO_EC_Gateway_IIOP::update_posted_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
An <a class="el" href="classTAO__EC__Gateway__IIOP.html#a8">update_consumer</a>() message arrived *while* we were doing a <a class="el" href="classTAO__EC__Gateway__IIOP.html#a5">push</a>() the modification is stored &lt;pub_&gt;, if multiple update_consumer messages arrive only the last one is executed.     </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="EC__Gateway_8h.html">EC_Gateway.h</a><li><a class="el" href="EC__Gateway_8cpp.html">EC_Gateway.cpp</a></ul>
<hr><address><small>Generated on Wed Jan 15 23:26:22 2003 for TAO_RTEvent by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.13.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
