<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>TAO_RefCountServantBase class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>TAO_RefCountServantBase  Class Reference</h1>Reference counting mix-in class. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;Servant_Base.h&gt;</code>
<p>
Inheritance diagram for TAO_RefCountServantBase:<p><center><img src="classTAO__RefCountServantBase__inherit__graph.gif" border="0" usemap="#TAO__RefCountServantBase__inherit__map" alt="Inheritance graph"></center>
<map name="TAO__RefCountServantBase__inherit__map">
<area href="classTAO__ServantBase.html" shape="rect" coords="41,84,161,103" alt="">
<area doxygen="TAO.tag:../" href="../classTAO__Abstract__ServantBase.html" shape="rect" coords="14,15,187,33" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for TAO_RefCountServantBase:<p><center><img src="classTAO__RefCountServantBase__coll__graph.gif" border="0" usemap="#TAO__RefCountServantBase__coll__map" alt="Collaboration graph"></center>
<map name="TAO__RefCountServantBase__coll__map">
<area href="classTAO__ServantBase.html" shape="rect" coords="115,7,235,26" alt="">
<area doxygen="ACE.tag:../../ace/" href="../../ace/classACE__Atomic__Op.html" shape="rect" coords="25,65,326,83" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classTAO__RefCountServantBase-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classTAO__RefCountServantBase.html#a0">~TAO_RefCountServantBase</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Destructor.</em> <a href="#a0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__RefCountServantBase.html#a1">_add_ref</a> (<a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a39">ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS</a>)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Increase reference count by one.</em> <a href="#a1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__RefCountServantBase.html#a2">_remove_ref</a> (<a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a39">ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS</a>)</td></tr>
<tr><td colspan=2><br><h2>Protected Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classTAO__RefCountServantBase.html#b0">TAO_RefCountServantBase</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Constructor: initial reference count is one.</em> <a href="#b0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classTAO__RefCountServantBase.html#b1">TAO_RefCountServantBase</a> (const TAO_RefCountServantBase &amp;)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Copy Constructor: Always sets the reference count of the new servant instance to one.</em> <a href="#b1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>TAO_RefCountServantBase &amp;&nbsp;</td><td valign=bottom><a class="el" href="classTAO__RefCountServantBase.html#b2">operator=</a> (const TAO_RefCountServantBase &amp;)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The default assignment implementation merely returns *this and does not affect the reference count.</em> <a href="#b2">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/classACE__Atomic__Op.html">ACE_Atomic_Op</a>&lt; <a class="elRef" doxygen="TAO.tag:../" href="../orbconf_8h.html#a2">TAO_SYNCH_MUTEX</a>,<br>
 long &gt;&nbsp;</td><td valign=bottom><a class="el" href="classTAO__RefCountServantBase.html#o0">ref_count_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Reference counter.</em> <a href="#o0">More...</a><em></em></font><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Reference counting mix-in class.
<p>

<p>
 The RefCountServantBase mix-in class overrides the inherited _add_ref and _remove_ref functions it inherits from ServantBase, implementing them to provide true reference counting. An instance of a servant class derived from RefCountServantBase initially has a reference count of one. Invoking _add_ref on the servant instance increases its reference count by one. Invoking _remove_ref on the servant instance decreases its reference count by one; if the resulting reference count equals zero, _remove_ref invokes delete on its this pointer in order to destroy the servant. For ORBs that operate in multi-threaded environments, the implementations of _add_ref and _remove_ref that the RefCountServantBase class provides shall be thread-safe.
<p>
Like ServantBase, RefCountServantBase supports copy construction and the default assignment operation. Copy construction always sets the reference count of the new servant instance to one. The default assignment implementation merely returns *this and does not affect the reference count. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="TAO_RefCountServantBase::~TAO_RefCountServantBase"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> TAO_RefCountServantBase::~TAO_RefCountServantBase </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destructor.
<p>
    </td>
  </tr>
</table>
<a name="b0" doxytag="TAO_RefCountServantBase::TAO_RefCountServantBase"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> TAO_RefCountServantBase::TAO_RefCountServantBase </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor: initial reference count is one.
<p>
    </td>
  </tr>
</table>
<a name="b1" doxytag="TAO_RefCountServantBase::TAO_RefCountServantBase"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> TAO_RefCountServantBase::TAO_RefCountServantBase </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const TAO_RefCountServantBase &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Copy Constructor: Always sets the reference count of the new servant instance to one.
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a1" doxytag="TAO_RefCountServantBase::_add_ref"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TAO_RefCountServantBase::_add_ref </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a39">ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Increase reference count by one.
<p>

<p>
Reimplemented from <a class="elRef" doxygen="TAO.tag:../" href="../classTAO__Abstract__ServantBase.html#z4_0">TAO_Abstract_ServantBase</a>.    </td>
  </tr>
</table>
<a name="a2" doxytag="TAO_RefCountServantBase::_remove_ref"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TAO_RefCountServantBase::_remove_ref </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/CORBA__macros_8h.html#a39">ACE_ENV_SINGLE_ARG_DECL_WITH_DEFAULTS</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Decreases reference count by one; if the resulting reference count equals zero, _remove_ref invokes delete on its this pointer in order to destroy the servant. 
<p>
Reimplemented from <a class="elRef" doxygen="TAO.tag:../" href="../classTAO__Abstract__ServantBase.html#z4_1">TAO_Abstract_ServantBase</a>.    </td>
  </tr>
</table>
<a name="b2" doxytag="TAO_RefCountServantBase::operator="></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> TAO_RefCountServantBase &amp; TAO_RefCountServantBase::operator= </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const TAO_RefCountServantBase &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The default assignment implementation merely returns *this and does not affect the reference count.
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="o0" doxytag="TAO_RefCountServantBase::ref_count_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../../ace/" href="../../ace/classACE__Atomic__Op.html">ACE_Atomic_Op</a>&lt;<a class="elRef" doxygen="TAO.tag:../" href="../orbconf_8h.html#a2">TAO_SYNCH_MUTEX</a>, long&gt; TAO_RefCountServantBase::ref_count_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Reference counter.
<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Servant__Base_8h.html">Servant_Base.h</a><li><a class="el" href="Servant__Base_8cpp.html">Servant_Base.cpp</a></ul>
<hr><address><small>Generated on Wed Jan 15 21:50:01 2003 for TAO_PortableServer by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.13.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
