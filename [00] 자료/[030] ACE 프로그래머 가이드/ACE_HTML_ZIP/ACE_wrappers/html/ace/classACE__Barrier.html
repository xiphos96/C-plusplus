<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ACE_Barrier class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>ACE_Barrier  Class Reference</h1>Implements "barrier synchronization". 
<a href="#_details">More...</a>
<p>
<code>#include &lt;Synch.h&gt;</code>
<p>
Inheritance diagram for ACE_Barrier:<p><center><img src="classACE__Barrier__inherit__graph.gif" border="0" usemap="#ACE__Barrier__inherit__map" alt="Inheritance graph"></center>
<map name="ACE__Barrier__inherit__map">
<area href="classACE__Thread__Barrier.html" shape="rect" coords="14,84,150,103" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for ACE_Barrier:<p><center><img src="classACE__Barrier__coll__graph.gif" border="0" usemap="#ACE__Barrier__coll__map" alt="Collaboration graph"></center>
<map name="ACE__Barrier__coll__map">
<area href="structACE__Sub__Barrier.html" shape="rect" coords="93,196,213,215" alt="">
<area href="classACE__Condition__Thread__Mutex.html" shape="rect" coords="75,106,265,124" alt="">
<area href="classACE__Thread__Mutex.html" shape="rect" coords="22,15,150,34" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classACE__Barrier-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__Barrier.html#a0">ACE_Barrier</a> (u_int count, const <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *name=0, void *arg=0)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Initialize the barrier to synchronize &lt;count&gt; threads.</em> <a href="#a0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__Barrier.html#a1">~ACE_Barrier</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Default dtor.</em> <a href="#a1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__Barrier.html#a2">wait</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Block the caller until all &lt;count&gt; threads have called &lt;wait&gt; and then allow all the caller threads to continue in parallel.</em> <a href="#a2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classACE__Barrier.html#a3">dump</a> (void) const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Dump the state of an object.</em> <a href="#a3">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Public Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__Barrier.html#m0">ACE_ALLOC_HOOK_DECLARE</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Declare the dynamic allocation hooks.</em> <a href="#m0">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Protected Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classACE__Thread__Mutex.html">ACE_Thread_Mutex</a>&nbsp;</td><td valign=bottom><a class="el" href="classACE__Barrier.html#n0">lock_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Serialize access to the barrier state.</em> <a href="#n0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__Barrier.html#n1">current_generation_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Either 0 or 1, depending on whether we are the first generation of waiters or the next generation of waiters.</em> <a href="#n1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__Barrier.html#n2">count_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Total number of threads that can be waiting at any one time.</em> <a href="#n2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="structACE__Sub__Barrier.html">ACE_Sub_Barrier</a>&nbsp;</td><td valign=bottom><a class="el" href="classACE__Barrier.html#n3">sub_barrier_1_</a></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="structACE__Sub__Barrier.html">ACE_Sub_Barrier</a>&nbsp;</td><td valign=bottom><a class="el" href="classACE__Barrier.html#n4">sub_barrier_2_</a></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="structACE__Sub__Barrier.html">ACE_Sub_Barrier</a> *&nbsp;</td><td valign=bottom><a class="el" href="classACE__Barrier.html#n5">sub_barrier_</a> [2]</td></tr>
<tr><td colspan=2><br><h2>Private Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classACE__Barrier.html#c0">operator=</a> (const ACE_Barrier &amp;)</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__Barrier.html#c1">ACE_Barrier</a> (const ACE_Barrier &amp;)</td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Implements "barrier synchronization".
<p>

<p>
 This class allows &lt;count&gt; number of threads to synchronize their completion of (one round of) a task, which is known as "barrier synchronization". After all the threads call &lt;<a class="el" href="classACE__Barrier.html#a2">wait</a>()&gt; on the barrier they are all atomically released and can begin a new round.
<p>
This implementation uses a "sub-barrier generation numbering" scheme to avoid overhead and to ensure that all threads wait to leave the barrier correct. This code is based on an article from SunOpsis Vol. 4, No. 1 by Richard Marejka (<a href="mailto:Richard.Marejka@canada.sun.com">Richard.Marejka@canada.sun.com</a>). 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="ACE_Barrier::ACE_Barrier"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_Barrier::ACE_Barrier </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">u_int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>count</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>name</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>void *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>arg</em> = 0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize the barrier to synchronize &lt;count&gt; threads.
<p>
    </td>
  </tr>
</table>
<a name="a1" doxytag="ACE_Barrier::~ACE_Barrier"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_Barrier::~ACE_Barrier </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Default dtor.
<p>
    </td>
  </tr>
</table>
<a name="c1" doxytag="ACE_Barrier::ACE_Barrier"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_Barrier::ACE_Barrier </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const ACE_Barrier &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a3" doxytag="ACE_Barrier::dump"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ACE_Barrier::dump </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Dump the state of an object.
<p>

<p>
Reimplemented in <a class="el" href="classACE__Thread__Barrier.html#a2">ACE_Thread_Barrier</a>.    </td>
  </tr>
</table>
<a name="c0" doxytag="ACE_Barrier::operator="></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ACE_Barrier::operator= </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const ACE_Barrier &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a2" doxytag="ACE_Barrier::wait"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_Barrier::wait </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Block the caller until all &lt;count&gt; threads have called &lt;wait&gt; and then allow all the caller threads to continue in parallel.
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="m0" doxytag="ACE_Barrier::ACE_ALLOC_HOOK_DECLARE"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_Barrier::ACE_ALLOC_HOOK_DECLARE
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Declare the dynamic allocation hooks.
<p>

<p>
Reimplemented in <a class="el" href="classACE__Thread__Barrier.html#m0">ACE_Thread_Barrier</a>.    </td>
  </tr>
</table>
<a name="n2" doxytag="ACE_Barrier::count_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_Barrier::count_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Total number of threads that can be waiting at any one time.
<p>
    </td>
  </tr>
</table>
<a name="n1" doxytag="ACE_Barrier::current_generation_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_Barrier::current_generation_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Either 0 or 1, depending on whether we are the first generation of waiters or the next generation of waiters.
<p>
    </td>
  </tr>
</table>
<a name="n0" doxytag="ACE_Barrier::lock_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classACE__Thread__Mutex.html">ACE_Thread_Mutex</a> ACE_Barrier::lock_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Serialize access to the barrier state.
<p>
    </td>
  </tr>
</table>
<a name="n5" doxytag="ACE_Barrier::sub_barrier_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structACE__Sub__Barrier.html">ACE_Sub_Barrier</a>* ACE_Barrier::sub_barrier_[2]<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="n3" doxytag="ACE_Barrier::sub_barrier_1_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structACE__Sub__Barrier.html">ACE_Sub_Barrier</a> ACE_Barrier::sub_barrier_1_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
We keep two &lt;sub_barriers&gt;, one for the first "generation" of waiters, and one for the next "generation" of waiters. This efficiently solves the problem of what to do if all the first generation waiters don't leave the barrier before one of the threads calls <a class="el" href="classACE__Barrier.html#a2">wait</a>() again (i.e., starts up the next generation barrier).     </td>
  </tr>
</table>
<a name="n4" doxytag="ACE_Barrier::sub_barrier_2_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="structACE__Sub__Barrier.html">ACE_Sub_Barrier</a> ACE_Barrier::sub_barrier_2_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Synch_8h.html">Synch.h</a><li><a class="el" href="Synch_8cpp.html">Synch.cpp</a></ul>
<hr><address><small>Generated on Wed Jan 15 19:07:35 2003 for ACE by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.13.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
