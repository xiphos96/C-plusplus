<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ACE_Filecache_Handle class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>ACE_Filecache_Handle  Class Reference</h1>Abstraction over a real file. This is meant to be the entry point into the Cached Virtual Filesystem. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;Filecache.h&gt;</code>
<p>
Collaboration diagram for ACE_Filecache_Handle:<p><center><img src="classACE__Filecache__Handle__coll__graph.gif" border="0" usemap="#ACE__Filecache__Handle__coll__map" alt="Collaboration graph"></center>
<map name="ACE__Filecache__Handle__coll__map">
<area href="classACE__Filecache__Object.html" shape="rect" coords="14,106,163,124" alt="">
<area href="classACE__Mem__Map.html" shape="rect" coords="34,15,143,34" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classACE__Filecache__Handle-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Types</h2></td></tr>
<tr><td nowrap align=right valign=top>enum &nbsp;</td><td valign=bottom>{ <br>
&nbsp;&nbsp;<a class="el" href="classACE__Filecache__Handle.html#s7s0">ACE_SUCCESS</a> =  0, 
<a class="el" href="classACE__Filecache__Handle.html#s7s1">ACE_ACCESS_FAILED</a>, 
<a class="el" href="classACE__Filecache__Handle.html#s7s2">ACE_OPEN_FAILED</a>, 
<a class="el" href="classACE__Filecache__Handle.html#s7s3">ACE_COPY_FAILED</a>, 
<br>
&nbsp;&nbsp;<a class="el" href="classACE__Filecache__Handle.html#s7s4">ACE_STAT_FAILED</a>, 
<a class="el" href="classACE__Filecache__Handle.html#s7s5">ACE_MEMMAP_FAILED</a>, 
<a class="el" href="classACE__Filecache__Handle.html#s7s6">ACE_WRITE_FAILED</a>
<br>
 }</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>These come from <a class="el" href="classACE__Filecache__Object.html">ACE_Filecache_Object</a>, which is an internal class.</em> <a href="#s7">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__Filecache__Handle.html#a0">ACE_Filecache_Handle</a> (const <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *filename, <a class="el" href="Filecache_8h.html#a4">ACE_Filecache_Flag</a> mapit=ACE_MAPIT)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Query cache for file, and acquire it. Assumes the file is being opened for reading.</em> <a href="#a0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__Filecache__Handle.html#a1">ACE_Filecache_Handle</a> (const <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *filename, int size, <a class="el" href="Filecache_8h.html#a4">ACE_Filecache_Flag</a> mapit=ACE_MAPIT)</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__Filecache__Handle.html#a2">~ACE_Filecache_Handle</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Closes any open handles, release acquired file.</em> <a href="#a2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void *&nbsp;</td><td valign=bottom><a class="el" href="classACE__Filecache__Handle.html#a3">address</a> (void) const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Base address of memory mapped file.</em> <a href="#a3">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>ACE_HANDLE&nbsp;</td><td valign=bottom><a class="el" href="classACE__Filecache__Handle.html#a4">handle</a> (void) const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>A handle (e.g., UNIX file descriptor, or NT file handle).</em> <a href="#a4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__Filecache__Handle.html#a5">error</a> (void) const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Any associated error in handle creation and acquisition.</em> <a href="#a5">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>off_t&nbsp;</td><td valign=bottom><a class="el" href="classACE__Filecache__Handle.html#a6">size</a> (void) const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The size of the file.</em> <a href="#a6">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Protected Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__Filecache__Handle.html#b0">ACE_Filecache_Handle</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Default do nothing constructor. Prevent it from being called.</em> <a href="#b0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classACE__Filecache__Handle.html#b1">init</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Common initializations for constructors.</em> <a href="#b1">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classACE__Filecache__Object.html">ACE_Filecache_Object</a> *&nbsp;</td><td valign=bottom><a class="el" href="classACE__Filecache__Handle.html#o0">file_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>A reference to the low level instance.</em> <a href="#o0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>ACE_HANDLE&nbsp;</td><td valign=bottom><a class="el" href="classACE__Filecache__Handle.html#o1">handle_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>A &lt;dup&gt;'d version of the one from &lt;file_&gt;.</em> <a href="#o1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__Filecache__Handle.html#o2">mapit_</a></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Abstraction over a real file. This is meant to be the entry point into the Cached Virtual Filesystem.
<p>

<p>
 This is a cached filesystem implementation based loosely on the implementation of JAWS_File. The interfaces will be nearly the same. The under-the-hood implementation should hopefully be a much faster thing. These will be given their own implementations later. For now, we borrow the implementation provided by JAWS. On creation, the cache is checked, and reference count is incremented. On destruction, reference count is decremented. If the reference count is 0, the file is removed from the cache. E.g. 1, { ACE_Filecache_Handle foo("foo.html"); this-&gt;peer ().send (foo.address (), foo.size ()); } E.g. 2, { ACE_Filecache_Handle foo("foo.html"); io-&gt;transmitfile (foo.handle (), this-&gt;peer ().handle ()); } E.g. 3, { ACE_Filecache_Handle foo("foo.html", content_length); this-&gt;peer ().recv (foo.address (), content_length); } TODO: 
<p>
<hr><h2>Member Enumeration Documentation</h2>
<a name="s7" doxytag="ACE_Filecache_Handle::@10"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> anonymous enum
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
These come from <a class="el" href="classACE__Filecache__Object.html">ACE_Filecache_Object</a>, which is an internal class.
<p>
<dl compact><dt><b>
Enumeration values:</b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a name="s7s0" doxytag="ACE_SUCCESS"></a><em>ACE_SUCCESS</em></em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a name="s7s1" doxytag="ACE_ACCESS_FAILED"></a><em>ACE_ACCESS_FAILED</em></em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a name="s7s2" doxytag="ACE_OPEN_FAILED"></a><em>ACE_OPEN_FAILED</em></em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a name="s7s3" doxytag="ACE_COPY_FAILED"></a><em>ACE_COPY_FAILED</em></em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a name="s7s4" doxytag="ACE_STAT_FAILED"></a><em>ACE_STAT_FAILED</em></em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a name="s7s5" doxytag="ACE_MEMMAP_FAILED"></a><em>ACE_MEMMAP_FAILED</em></em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a name="s7s6" doxytag="ACE_WRITE_FAILED"></a><em>ACE_WRITE_FAILED</em></em>&nbsp;</td><td>
</td></tr>
</table>
</dl>
    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="ACE_Filecache_Handle::ACE_Filecache_Handle"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_Filecache_Handle::ACE_Filecache_Handle </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>filename</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="Filecache_8h.html#a4">ACE_Filecache_Flag</a>&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>mapit</em> = ACE_MAPIT</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Query cache for file, and acquire it. Assumes the file is being opened for reading.
<p>
    </td>
  </tr>
</table>
<a name="a1" doxytag="ACE_Filecache_Handle::ACE_Filecache_Handle"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_Filecache_Handle::ACE_Filecache_Handle </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>filename</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>size</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="Filecache_8h.html#a4">ACE_Filecache_Flag</a>&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>mapit</em> = ACE_MAPIT</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create new entry, and acquire it. Presence of SIZE assumes the file is being opened for writing. If SIZE is zero, assumes the file is to be removed from the cache.     </td>
  </tr>
</table>
<a name="a2" doxytag="ACE_Filecache_Handle::~ACE_Filecache_Handle"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_Filecache_Handle::~ACE_Filecache_Handle </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Closes any open handles, release acquired file.
<p>
    </td>
  </tr>
</table>
<a name="b0" doxytag="ACE_Filecache_Handle::ACE_Filecache_Handle"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_Filecache_Handle::ACE_Filecache_Handle </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Default do nothing constructor. Prevent it from being called.
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a3" doxytag="ACE_Filecache_Handle::address"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void * ACE_Filecache_Handle::address </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Base address of memory mapped file.
<p>
    </td>
  </tr>
</table>
<a name="a5" doxytag="ACE_Filecache_Handle::error"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_Filecache_Handle::error </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Any associated error in handle creation and acquisition.
<p>
    </td>
  </tr>
</table>
<a name="a4" doxytag="ACE_Filecache_Handle::handle"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_HANDLE ACE_Filecache_Handle::handle </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A handle (e.g., UNIX file descriptor, or NT file handle).
<p>
    </td>
  </tr>
</table>
<a name="b1" doxytag="ACE_Filecache_Handle::init"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ACE_Filecache_Handle::init </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Common initializations for constructors.
<p>
    </td>
  </tr>
</table>
<a name="a6" doxytag="ACE_Filecache_Handle::size"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> off_t ACE_Filecache_Handle::size </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The size of the file.
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="o0" doxytag="ACE_Filecache_Handle::file_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classACE__Filecache__Object.html">ACE_Filecache_Object</a>* ACE_Filecache_Handle::file_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A reference to the low level instance.
<p>
    </td>
  </tr>
</table>
<a name="o1" doxytag="ACE_Filecache_Handle::handle_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_HANDLE ACE_Filecache_Handle::handle_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A &lt;dup&gt;'d version of the one from &lt;file_&gt;.
<p>
    </td>
  </tr>
</table>
<a name="o2" doxytag="ACE_Filecache_Handle::mapit_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_Filecache_Handle::mapit_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Filecache_8h.html">Filecache.h</a><li><a class="el" href="Filecache_8cpp.html">Filecache.cpp</a></ul>
<hr><address><small>Generated on Wed Jan 15 19:08:51 2003 for ACE by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.13.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
