<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Miscellaneous Notes for ACE/TAO and Microsoft Visual C++</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><a name="msvc"><h2>Miscellaneous Notes for ACE/TAO and Microsoft Visual C++</h2></a>

<p>
Here are just some random information about <a class="el" href="classACE.html">ACE</a>/TAO with Microsoft Visual C++. This is more a collection of ideas right now, so it may not be as  polished as other <a class="el" href="classACE.html">ACE</a> documentation.
<p>
<a name="msvc_configurations"><h3>Configurations</h3></a>

<p>
MSVC project files come with several configurations. The main two are Debug and Release. Debug produces libraries and executables with debugging symbols and doesn't enable inlining. The Release configuration enables optimizations and leaves out debugging symbols. All projects (with the exception of some of the tests) contain both configurations. Most of the libraries also contain four more, Static Release/Debug and MFC Release/Debug.
<p>
Different configurations produce different libraries and executables. For example, Debug versions of dynamic libraries are always named *d.dll (like  aced.dll) and the executables are placed in the current directory. Release versions of dynamic libraries are named *.dll (such as ace.dll) and their executables are usually placed in the Release subdirectory. Other common  suffixes include *sd.lib for Static Debug and *s.lib for Static Release.
<p>
Projects only use the same configuration versions of the libraries. The Debug version of an <a class="el" href="classACE.html">ACE</a> example only uses
<p>
<a name="msvc_otheroptions"><h3>How to Set Other Options</h3></a>

<p>
Other compile time options are set or unset via the config.h file. For example, to turn on a compile time definition, define it at the beginning of config.h. Unsetting a definition just requires define ACE_FOO 0 or a undef  at the end of the file (after including config-win32.h). Different macros  require different techniques.
<p>
<a name="msvc_libraries"><h3>ACE/TAO Libraries</h3></a>

<p>
I don't think we have any documents really giving any info on what libraries are produced by the MSVC project files.
<p>
So unlike the Unix platforms, Win32 libraries do not have a prefix of "lib", instead it is used as an extension. For example, the debug version of the  dynamic ace library is aced.lib (which is a stub for aced.dll). The three <a class="el" href="classACE.html">ACE</a> libraries are:
<p>
<ul>
<li>ace<li>ACE_RMCast<li>ACE_SSL</ul>
And for TAO we have the main TAO library and several sub libraries which contain extra features of TAO that aren't always needed (such as the POA in TAO_PortableServer).
<p>
<ul>
<li>TAO<li>TAO_DynamicAny<li>TAO_DynamicInterface<li>TAO_IORManip<li>TAO_IORTable<li>TAO_PortableServer<li>TAO_SmartProxies<li>TAO_Strategies</ul>
And finally we have the orbsvcs libraries. Each ORB service is contained in its own library. More libraries may be needed to be linked in, since some services require the use of others (such as TAO_AV requiring  TAO_CosTrading and TAO_CosProperty).
<p>
<ul>
<li>TAO_AV<li>TAO_CosConcurrency<li>TAO_CosEvent<li>TAO_CosLifeCycle<li>TAO_CosNaming<li>TAO_CosNotification<li>TAO_CosProperty<li>TAO_CosTime<li>TAO_CosTrading<li>TAO_DsLogAdmin<li>TAO_Fault_Tolerance<li>TAO_LoadBalancing<li>TAO_RTEvent<li>TAO_RTOLDEvent<li>TAO_RTSched<li>TAO_RTSchedEvent<li>TAO_Security<li>TAO_SSLIOP<li>TAO_Svc_Utils</ul>
The *.lib files are located in the directory where the project that creates them exists. The *.dll files are usually placed in ACE_wrappers\bin (so you only need to add one directory to your path).
<p>
I hesitate to put down explicit instructions on what libraries need to be linked in, considering that the libraries are being split apart more and more for footprint purposes. For most <a class="el" href="classACE.html">ACE</a> stuff, you will only need to link in ace.lib. For plain TAO clients TAO.lib is enough. TAO servers also require TAO_PortableServer.lib for the POA. If the TAO application uses Dynamic Anys, TAO_DynamicAny.lib is also needed. Then if any of the ORB Services are used, more libraries are needed. For example, a client that uses the Name Service would need to link TAO_CosNaming.lib.
<p>
And note that the release versions of the libraries are listed above. For  debug configurations the libraries would be aced.lib, TAOd.lib, etc.
<p>
<a name="msvc_external_projects"><h3>External ACE/TAO Projects</h3></a>

<p>
It is a little difficult for us to list how exactly one should create  projects that use <a class="el" href="classACE.html">ACE</a>/TAO but are external to the ACE_wrappers tree. Since most projects we create are in that tree, we can make assumptions about directory structure that doesn't always apply for external projects. In  other words, we have ideas how they should work, but they usually remain  a bit, um, untested. :-)
<p>
There are three main dependencies a project would have on <a class="el" href="classACE.html">ACE</a>/TAO.
<p>
<ul>
<li>Include paths: Since all the headers use a subdirectory way of referring to include files (such as "<a class="el" href="OS_8h.html">ace/OS.h</a>" instead of just "<a class="el" href="OS_8h.html">OS.h</a>"). In order to make this work either the path to ACE_wrappers (and ACE_wrappers\TAO and ACE_wrappers\TAO\orbsvcs, etc.) to the additional include paths of the project or in MSVC. I believe it is a better idea to add them to the global MSVC directories. That way the path to <a class="el" href="classACE.html">ACE</a> on a machine doesn't get hard coded into the project itself (this should make it easier to move the  project between machines where <a class="el" href="classACE.html">ACE</a> is installed in different places).</ul>
<ul>
<li>Libraries and library paths: Depending on what features are needed,  different libraries are needed to be linked in. (This is covered more in an above section). These libraries are specified in the project, but can be specified in different ways. The first is the hard coded way (a full path, such as "C:\ACE_wrappers\ace\aced.lib"). The second is listing only the library (such as "aced.lib") and then specify the path either in the project or via MSVC global settings. Just like for the include paths, MSVC global settings is probably the more robust way of specifying this.</ul>
<ul>
<li>TAO_IDL: TAO's IDL compiler resides in ACE_wrappers\bin. If the external project contains IDL files, then a custom build configuration can be used to automatically call TAO_IDL. Note that the location of the release  version of the compiler is in ACE_wrappers\bin\Release (although it doesn't matter which version you use, they both produce the same output). If  ACE_wrappers\bin is included in the path, then the build command can just refer to tao_idl and it can be found via the path. The other options are to refer to tao_idl via an absolute hard coded path or to add  ACE_wrappers\bin to the MSVC's global executable path settings. Either way the bin directory must be in the path or in the global settings so  tao_idl can find aced.dll.</ul>
So I guess in summary we would recommend adding most of the settings to Visual C++'s global settings (include paths, library paths, and executable paths) and just refer to the libraries without any paths.
<p>
<a name="msvc_aceroot"><h3>ACE_ROOT</h3></a>

<p>
ACE_ROOT is an interesting environment variable. Even though it is heavily used on Unix (in fact, <a class="el" href="classACE.html">ACE</a>/TAO will not compile without it) it really isn't needed for MSVC. The reason for this is that we were interested in making  configuration and setup really easy for Visual C++ on Windows. In retrospect  it might have made quite a few things easier to specify if ACE_ROOT was  required. One thing you might notice is that TAO_IDL will display a message  if ACE_ROOT isn't set, but it is only a problem if the IDL file includes &lt;orb.idl&gt; and you don't use -I to specify where orb.idl is.
<p>
<hr><address><small>Generated on Wed Jan 15 19:17:21 2003 for ACE by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.13.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
