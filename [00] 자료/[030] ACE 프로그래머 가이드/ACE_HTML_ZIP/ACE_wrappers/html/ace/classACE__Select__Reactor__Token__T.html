<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title> TemplateACE_Select_Reactor_Token_T class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>ACE_Select_Reactor_Token_T  Class Template Reference</h1>Used as a synchronization mechanism to coordinate concurrent access to a Select_Reactor object. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;Select_Reactor_T.h&gt;</code>
<p>
Inheritance diagram for ACE_Select_Reactor_Token_T:<p><center><img src="classACE__Select__Reactor__Token__T__inherit__graph.gif" border="0" usemap="#ACE__Select__Reactor__Token__T_3_01ACE__SELECT__REACTOR__MUTEX_01_4__inherit__map" alt="Inheritance graph"></center>
<map name="ACE__Select__Reactor__Token__T_3_01ACE__SELECT__REACTOR__MUTEX_01_4__inherit__map">
<area href="classACE__Select__Reactor__Token__T.html" shape="rect" coords="50,105,405,124" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for ACE_Select_Reactor_Token_T:<p><center><img src="classACE__Select__Reactor__Token__T__coll__graph.gif" border="0" usemap="#ACE__Select__Reactor__Token__T_3_01ACE__SELECT__REACTOR__MUTEX_01_4__coll__map" alt="Collaboration graph"></center>
<map name="ACE__Select__Reactor__Token__T_3_01ACE__SELECT__REACTOR__MUTEX_01_4__coll__map">
<area href="classACE__Select__Reactor__Impl.html" shape="rect" coords="25,14,190,32" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classACE__Select__Reactor__Token__T-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__Select__Reactor__Token__T.html#a0">ACE_Select_Reactor_Token_T</a> (<a class="el" href="classACE__Select__Reactor__Impl.html">ACE_Select_Reactor_Impl</a> &amp;r, int s_queue=ACE_SELECT_TOKEN::FIFO)</td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__Select__Reactor__Token__T.html#a1">ACE_Select_Reactor_Token_T</a> (int s_queue=ACE_SELECT_TOKEN::FIFO)</td></tr>
<tr><td nowrap align=right valign=top>virtual&nbsp;</td><td valign=bottom><a class="el" href="classACE__Select__Reactor__Token__T.html#a2">~ACE_Select_Reactor_Token_T</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="classACE__Select__Reactor__Token__T.html#a3">sleep_hook</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Called just before the <a class="el" href="classACE__Event__Handler.html">ACE_Event_Handler</a> goes to sleep.</em> <a href="#a3">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classACE__Select__Reactor__Impl.html">ACE_Select_Reactor_Impl</a> &amp;&nbsp;</td><td valign=bottom><a class="el" href="classACE__Select__Reactor__Token__T.html#a4">select_reactor</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Get the select_reactor implementation.</em> <a href="#a4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classACE__Select__Reactor__Token__T.html#a5">select_reactor</a> (<a class="el" href="classACE__Select__Reactor__Impl.html">ACE_Select_Reactor_Impl</a> &amp;)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Set the select_reactor implementation.</em> <a href="#a5">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="classACE__Select__Reactor__Token__T.html#a6">dump</a> (void) const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Dump the state of an object.</em> <a href="#a6">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Public Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__Select__Reactor__Token__T.html#m0">ACE_ALLOC_HOOK_DECLARE</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Declare the dynamic allocation hooks.</em> <a href="#m0">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classACE__Select__Reactor__Impl.html">ACE_Select_Reactor_Impl</a> *&nbsp;</td><td valign=bottom><a class="el" href="classACE__Select__Reactor__Token__T.html#o0">select_reactor_</a></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;class ACE_SELECT_REACTOR_MUTEX&gt;<br>
 class ACE_Select_Reactor_Token_T&lt; ACE_SELECT_REACTOR_MUTEX &gt;</h3>

Used as a synchronization mechanism to coordinate concurrent access to a Select_Reactor object.
<p>

<p>
 This class is used to make the &lt;ACE_Select_Reactor&gt; thread-safe. By default, the thread that runs the &lt;handle_events&gt; loop holds the token, even when it is blocked in the &lt;select&gt; call. Whenever another thread wants to access the &lt;<a class="el" href="classACE__Reactor.html">ACE_Reactor</a>&gt; via its &lt;register_handler&gt;, &lt;remove_handler&gt;, etc. methods) it must ask the token owner for temporary release of the token. To accomplish this, the owner of a token must define a &lt;sleep_hook&gt; through which it can be notified to temporarily release the token if the current situation permits this. The owner of the token is responsible for deciding which request for the token can be granted. By using the &lt;<a class="el" href="classACE__Token.html#a7">ACE_Token::renew</a>&gt; API, the thread that releases the token temporarily can specify to get the token back right after the other thread has completed using the token. Thus, there is a dedicated thread that owns the token ``by default.'' This thread grants other threads access to the token by ensuring that whenever somebody else has finished using the token the ``default owner'' first holds the token again, i.e., the owner has the chance to schedule other threads. The thread that most likely needs the token most of the time is the thread running the dispatch loop. Typically the token gets released prior to entering the &lt;select&gt; call and gets ``re-acquired'' as soon as the &lt;select&gt; call returns, which results probably in many calls to &lt;release&gt;/&lt;acquire&gt; that are not really needed since no other thread would need the token in the meantime. That's why the dispatcher thread is chosen to be the owner of the token. In case the token would have been released while in &lt;select&gt; there would be a good chance that the &lt;fd_set&gt; could have been modified while the &lt;select&gt; returns from blocking and trying to re-acquire the lock. Through the token mechanism it is ensured that while another thread is holding the token, the dispatcher thread is blocked in the &lt;renew&gt; call and not in &lt;select&gt;. Thus, it is not critical to change the &lt;fd_set&gt;. The implementation of the &lt;sleep_hook&gt; mechanism provided by the &lt;ACE_Select_Reactor_Token&gt; enables the default owner to be the thread that executes the dispatch loop. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="ACE_Select_Reactor_Token_T::ACE_Select_Reactor_Token_T"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" colspan="4">
template&lt;class ACE_SELECT_REACTOR_MUTEX&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"> ACE_Select_Reactor_Token_T&lt; ACE_SELECT_REACTOR_MUTEX &gt;::ACE_Select_Reactor_Token_T </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classACE__Select__Reactor__Impl.html">ACE_Select_Reactor_Impl</a> &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>r</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>s_queue</em> = ACE_SELECT_TOKEN::FIFO</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a1" doxytag="ACE_Select_Reactor_Token_T::ACE_Select_Reactor_Token_T"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" colspan="4">
template&lt;class ACE_SELECT_REACTOR_MUTEX&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"> ACE_Select_Reactor_Token_T&lt; ACE_SELECT_REACTOR_MUTEX &gt;::ACE_Select_Reactor_Token_T </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>s_queue</em> = ACE_SELECT_TOKEN::FIFO          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a2" doxytag="ACE_Select_Reactor_Token_T::~ACE_Select_Reactor_Token_T"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" colspan="4">
template&lt;class ACE_SELECT_REACTOR_MUTEX&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"> ACE_Select_Reactor_Token_T&lt; ACE_SELECT_REACTOR_MUTEX &gt;::~ACE_Select_Reactor_Token_T </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a6" doxytag="ACE_Select_Reactor_Token_T::dump"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" colspan="4">
template&lt;class ACE_SELECT_REACTOR_MUTEX&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"> void ACE_Select_Reactor_Token_T&lt; ACE_SELECT_REACTOR_MUTEX &gt;::dump </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Dump the state of an object.
<p>

<p>
Reimplemented from <a class="el" href="classACE__Noop__Token.html#a3">ACE_Noop_Token</a>.    </td>
  </tr>
</table>
<a name="a5" doxytag="ACE_Select_Reactor_Token_T::select_reactor"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" colspan="4">
template&lt;class ACE_SELECT_REACTOR_MUTEX&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"> void ACE_Select_Reactor_Token_T&lt; ACE_SELECT_REACTOR_MUTEX &gt;::select_reactor </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classACE__Select__Reactor__Impl.html">ACE_Select_Reactor_Impl</a> &amp;&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>select_reactor</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the select_reactor implementation.
<p>
    </td>
  </tr>
</table>
<a name="a4" doxytag="ACE_Select_Reactor_Token_T::select_reactor"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" colspan="4">
template&lt;class ACE_SELECT_REACTOR_MUTEX&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classACE__Select__Reactor__Impl.html">ACE_Select_Reactor_Impl</a> &amp; ACE_Select_Reactor_Token_T&lt; ACE_SELECT_REACTOR_MUTEX &gt;::select_reactor </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the select_reactor implementation.
<p>
    </td>
  </tr>
</table>
<a name="a3" doxytag="ACE_Select_Reactor_Token_T::sleep_hook"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" colspan="4">
template&lt;class ACE_SELECT_REACTOR_MUTEX&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"> void ACE_Select_Reactor_Token_T&lt; ACE_SELECT_REACTOR_MUTEX &gt;::sleep_hook </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called just before the <a class="el" href="classACE__Event__Handler.html">ACE_Event_Handler</a> goes to sleep.
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="m0" doxytag="ACE_Select_Reactor_Token_T::ACE_ALLOC_HOOK_DECLARE"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" colspan="4">
template&lt;class ACE_SELECT_REACTOR_MUTEX&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"> ACE_Select_Reactor_Token_T::ACE_ALLOC_HOOK_DECLARE
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Declare the dynamic allocation hooks.
<p>

<p>
Reimplemented from <a class="el" href="classACE__Noop__Token.html#m0">ACE_Noop_Token</a>.    </td>
  </tr>
</table>
<a name="o0" doxytag="ACE_Select_Reactor_Token_T::select_reactor_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" colspan="4">
template&lt;class ACE_SELECT_REACTOR_MUTEX&gt; </td>
        </tr>
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classACE__Select__Reactor__Impl.html">ACE_Select_Reactor_Impl</a>* ACE_Select_Reactor_Token_T::select_reactor_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Select__Reactor__T_8h.html">Select_Reactor_T.h</a><li><a class="el" href="Select__Reactor__T_8cpp.html">Select_Reactor_T.cpp</a></ul>
<hr><address><small>Generated on Wed Jan 15 19:13:48 2003 for ACE by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.13.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
