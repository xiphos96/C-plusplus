<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>NT_Service.h File Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>NT_Service.h File Reference</h1><code>#include "ace/pre.h"</code><br>
<code>#include "ace/config-all.h"</code><br>
<code>#include "ace/ACE.h"</code><br>
<code>#include "ace/OS_Log_Msg_Attributes.h"</code><br>
<code>#include "ace/Service_Object.h"</code><br>
<code>#include "ace/Synch.h"</code><br>
<code>#include "ace/Task.h"</code><br>
<code>#include "ace/post.h"</code><br>

<p>
Include dependency graph for NT_Service.h:<p><center><img src="NT__Service_8h__incl.gif" border="0" usemap="#NT_Service.h_map" alt="Include dependency graph"></center>
<map name="NT_Service.h_map">
<area href="pre_8h.html" shape="rect" coords="41,196,107,215" alt="">
<area href="ACE_8h.html" shape="rect" coords="227,355,302,373" alt="">
<area href="OS__Log__Msg__Attributes_8h.html" shape="rect" coords="171,75,358,93" alt="">
<area href="Service__Object_8h.html" shape="rect" coords="197,219,333,237" alt="">
<area href="Synch_8h.html" shape="rect" coords="223,261,306,280" alt="">
<area href="Task_8h.html" shape="rect" coords="406,172,481,191" alt="">
<area href="post_8h.html" shape="rect" coords="39,285,109,304" alt="">
</map>

<p>
This graph shows which files directly or indirectly include this file:<p><center><img src="NT__Service_8h__dep__incl.gif" border="0" usemap="#NT_Service.hdep_map" alt="Included by dependency graph"></center>
<map name="NT_Service.hdep_map">
<area href="NT__Service_8cpp.html" shape="rect" coords="14,15,118,34" alt="">
</map>
<table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Compounds</h2></td></tr>
<tr><td nowrap align=right valign=top>class &nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html">ACE_NT_Service</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Provide the base class which defines the interface for controlling an NT service.</em> <a href="classACE__NT__Service.html#_details">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Defines</h2></td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="NT__Service_8h.html#a0">ACE_NT_SERVICE_START_TIMEOUT</a>&nbsp;&nbsp;&nbsp;5000</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="NT__Service_8h.html#a1">ACE_NT_SERVICE_DEFINE</a>(SVCNAME, SVCCLASS, SVCDESC)</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="NT__Service_8h.html#a2">ACE_NT_SERVICE_REFERENCE</a>(SVCNAME)</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="NT__Service_8h.html#a3">ACE_NT_SERVICE_ENTRY</a>(SVCDESC, SVCNAME)&nbsp;&nbsp;&nbsp;{ SVCDESC, &amp;ace_nt_svc_main_##SVCNAME }</td></tr>
<tr><td nowrap align=right valign=top>#define&nbsp;</td><td valign=bottom><a class="el" href="NT__Service_8h.html#a4">ACE_NT_SERVICE_RUN</a>(SVCNAME, SVCINSTANCE, RET)</td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>

<p>
<a class="el" href="NT__Service_8h.html">NT_Service.h</a>,v 4.24 2002/12/21 23:29:24 shuston Exp
<p>
<dl compact><dt><b>
Author: </b><dd>
Steve Huston &lt;<a href="mailto:shuston@riverace.com">shuston@riverace.com</a>&gt;</dl><hr><h2>Define Documentation</h2>
<a name="a1" doxytag="NT_Service.h::ACE_NT_SERVICE_DEFINE"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ACE_NT_SERVICE_DEFINE</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">SVCNAME,         <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>SVCCLASS,         <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>SVCDESC&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre><a class="code" href="classACE__NT__Service.html">ACE_NT_Service</a> * _ace_nt_svc_obj_##SVCNAME = 0;                           \
  VOID WINAPI ace_nt_svc_handler_##SVCNAME (DWORD fdwControl) {             \
    _ace_nt_svc_obj_##SVCNAME-&gt;handle_control(fdwControl);                  \
  }                                                                         \
  VOID WINAPI ace_nt_svc_main_##SVCNAME (DWORD dwArgc,                      \
                                         <a class="code" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> **lpszArgv) {            \
    <font class="keywordtype">int</font> delete_svc_obj = 0;                                                 \
    <font class="keywordflow">if</font> (_ace_nt_svc_obj_##SVCNAME == 0) {                                   \
      <a class="code" href="OS__Memory_8h.html#a6">ACE_NEW</a> (_ace_nt_svc_obj_##SVCNAME, SVCCLASS);                        \
      <font class="keywordflow">if</font> (_ace_nt_svc_obj_##SVCNAME == 0)                                   \
        <font class="keywordflow">return</font>;                                                             \
      delete_svc_obj = 1;                                                   \
    }                                                                       \
    <font class="keywordflow">else</font>                                                                    \
      _ace_nt_svc_obj_##SVCNAME-&gt;inherit_log_msg_attributes ();             \
    _ace_nt_svc_obj_##SVCNAME-&gt;init(dwArgc, lpszArgv);                      \
    _ace_nt_svc_obj_##SVCNAME-&gt;svc_handle(                                  \
                  ACE_TEXT_RegisterServiceCtrlHandler(SVCDESC,              \
                                          &amp;ace_nt_svc_handler_##SVCNAME));  \
    _ace_nt_svc_obj_##SVCNAME-&gt;open();                                      \
    _ace_nt_svc_obj_##SVCNAME-&gt;wait();                                      \
    _ace_nt_svc_obj_##SVCNAME-&gt;fini();                                      \
    <font class="keywordflow">if</font> (delete_svc_obj) {                                                   \
      <font class="keyword">delete</font> _ace_nt_svc_obj_##SVCNAME;                                     \
      _ace_nt_svc_obj_##SVCNAME = 0;                                        \
    }                                                                       \
    <font class="keywordflow">return</font>;                                                                 \
  }</pre></div>    </td>
  </tr>
</table>
<a name="a3" doxytag="NT_Service.h::ACE_NT_SERVICE_ENTRY"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ACE_NT_SERVICE_ENTRY</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">SVCDESC,         <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>SVCNAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap>&nbsp;&nbsp;&nbsp;{ SVCDESC, &amp;ace_nt_svc_main_##SVCNAME }
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a2" doxytag="NT_Service.h::ACE_NT_SERVICE_REFERENCE"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ACE_NT_SERVICE_REFERENCE</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">SVCNAME&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre><font class="keyword">extern</font> <a class="code" href="classACE__NT__Service.html">ACE_NT_Service</a> * _ace_nt_svc_obj_##SVCNAME;                         \
<font class="keyword">extern</font> VOID WINAPI ace_nt_svc_main_##SVCNAME (DWORD dwArgc,                \
                                              <a class="code" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> **lpszArgv);</pre></div>    </td>
  </tr>
</table>
<a name="a4" doxytag="NT_Service.h::ACE_NT_SERVICE_RUN"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ACE_NT_SERVICE_RUN</td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">SVCNAME,         <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>SVCINSTANCE,         <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>RET&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<b>Value:</b><div class="fragment"><pre>ACE_TEXT_SERVICE_TABLE_ENTRY _ace_nt_svc_table[2] =                      \
  {                                                                        \
    <a class="code" href="NT__Service_8h.html#a3">ACE_NT_SERVICE_ENTRY</a>(<a class="code" href="ace__wchar_8h.html#a8">ACE_TEXT</a> (#SVCNAME), SVCNAME),                    \
    { 0, 0 }                                                               \
  };                                                                       \
  _ace_nt_svc_obj_##SVCNAME = SVCINSTANCE;                                 \
  _ace_nt_svc_obj_##SVCNAME-&gt;capture_log_msg_attributes ();                \
  <a class="code" href="classACE__OS.html#z27_0">ACE_OS::last_error</a> (0);                                                  \
  <font class="keywordtype">int</font> RET = ACE_TEXT_StartServiceCtrlDispatcher(_ace_nt_svc_table);</pre></div>    </td>
  </tr>
</table>
<a name="a0" doxytag="NT_Service.h::ACE_NT_SERVICE_START_TIMEOUT"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> #define ACE_NT_SERVICE_START_TIMEOUT&nbsp;&nbsp;&nbsp;5000
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><address><small>Generated on Wed Jan 15 18:31:43 2003 for ACE by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.13.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
