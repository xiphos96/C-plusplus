<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>TAO_Leader_Follower class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="namespaces.html">Namespace List</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="namespacemembers.html">Namespace Members</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>TAO_Leader_Follower  Class Reference</h1><code>#include &lt;Leader_Follower.h&gt;</code>
<p>
Collaboration diagram for TAO_Leader_Follower:<p><center><img src="classTAO__Leader__Follower__coll__graph.gif" border="0" usemap="#TAO__Leader__Follower__coll__map" alt="Collaboration graph"></center>
<map name="TAO__Leader__Follower__coll__map">
<area doxygen="ACE.tag:../ace/" href="../ace/classACE__Reactor.html" shape="rect" coords="122,47,213,66" alt="">
<area doxygen="ACE.tag:../ace/" href="../ace/classACE__Reverse__Lock.html" shape="rect" coords="25,115,310,134" alt="">
<area href="classTAO__ORB__Core.html" shape="rect" coords="113,183,222,202" alt="">
<area doxygen="ACE.tag:../ace/" href="../ace/classACE__Intrusive__List.html" shape="rect" coords="45,266,290,284" alt="">
<area href="classTAO__New__Leader__Generator.html" shape="rect" coords="77,334,258,352" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classTAO__Leader__Follower-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a0">TAO_Leader_Follower</a> (<a class="el" href="classTAO__ORB__Core.html">TAO_ORB_Core</a> *orb_core, <a class="el" href="classTAO__New__Leader__Generator.html">TAO_New_Leader_Generator</a> *new_leader_generator=0)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Constructor.</em> <a href="#a0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a1">~TAO_Leader_Follower</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Destructor.</em> <a href="#a1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a2">set_event_loop_thread</a> (<a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Time__Value.html">ACE_Time_Value</a> *max_wait_time)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The current thread has become a server thread (i.e. called ORB::run), update any flags and counters.</em> <a href="#a2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a3">reset_event_loop_thread</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The current thread is not a server thread anymore, reset any flags and counters.</em> <a href="#a3">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a4">set_upcall_thread</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>This thread is going to perform an upcall, it will no longer be an event loop thread.</em> <a href="#a4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a5">leader_available</a> (void) const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Is there any thread running as a leader?</em> <a href="#a5">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a6">set_client_thread</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>A server thread is making a request.</em> <a href="#a6">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a7">reset_client_thread</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>A server thread has finished is making a request.</em> <a href="#a7">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a8">wait_for_event</a> (<a class="el" href="classTAO__LF__Event.html">TAO_LF_Event</a> *event, <a class="el" href="classTAO__Transport.html">TAO_Transport</a> *transport, <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Time__Value.html">ACE_Time_Value</a> *max_wait_time)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Wait on the Leader/Followers loop until one event happens.</em> <a href="#a8">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a9">set_client_leader_thread</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The current thread has become the leader thread in the client side leader-follower set.</em> <a href="#a9">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a10">reset_client_leader_thread</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The current thread is no longer the leader thread in the client side leader-follower set.</em> <a href="#a10">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a11">set_client_leader_thread</a> (<a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8h.html#a347">ACE_thread_t</a> thread_ID)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>sets the thread ID of the leader thread in the leader-follower model.</em> <a href="#a11">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a12">is_client_leader_thread</a> (void) const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>checks if we are a leader thread.</em> <a href="#a12">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a13">elect_new_leader</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>TAO_SYNCH_MUTEX &amp;&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a14">lock</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Get a reference to the underlying mutex.</em> <a href="#a14">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Reverse__Lock.html">ACE_Reverse_Lock</a>&lt; TAO_SYNCH_MUTEX &gt; &amp;&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a15">reverse_lock</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Provide a pre-initialized reverse lock for the Leader/Followers set.</em> <a href="#a15">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a16">has_clients</a> (void) const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Check if there are any client threads running.</em> <a href="#a16">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Reactor.html">ACE_Reactor</a> *&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a17">reactor</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Accesor to the reactor.</em> <a href="#a17">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#a18">no_leaders_available</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Called when we are out of leaders.</em> <a href="#a18">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan="2"><div class="groupHeader">Follower creation/destructions</div></td></tr>
<tr><td colspan="2"><div class="groupText">The Leader/Followers set acts as a factory for the Follower objects. Followers are used to represent a thread blocked waiting in the Follower set.
<p>
The Leader/Followers abstraction keeps a list of the waiting followers, so it can wake up one when the leader thread stops handling events.
<p>
For performance reasons the Leader/Followers set uses a pool (or free-list) to keep Follower objects unattached to any thread. It could be tempting to use TSS to keep such followers, after all a thread can only need one such Follower object, however, that does not work with multiple Leader/Followers sets, consult this bug report for more details:
<p>
<a href="http://ace.cs.wustl.edu/bugzilla/show_bug.cgi?id=296">http://ace.cs.wustl.edu/bugzilla/show_bug.cgi?id=296</a><br><br></div></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classTAO__LF__Follower.html">TAO_LF_Follower</a> *&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#z18_0">allocate_follower</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Allocate a new follower to the caller.</em> <a href="#z18_0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#z18_1">release_follower</a> (<a class="el" href="classTAO__LF__Follower.html">TAO_LF_Follower</a> *)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The caller has finished using a follower.</em> <a href="#z18_1">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan="2"><div class="groupHeader">Follower Set Operations</div></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#z19_0">add_follower</a> (<a class="el" href="classTAO__LF__Follower.html">TAO_LF_Follower</a> *follower)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Add a new follower to the set.</em> <a href="#z19_0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#z19_1">remove_follower</a> (<a class="el" href="classTAO__LF__Follower.html">TAO_LF_Follower</a> *follower)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Removes a follower from the leader-follower set.</em> <a href="#z19_1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#z19_2">follower_available</a> (void) const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Checks if there are any followers available.</em> <a href="#z19_2">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Private Types</h2></td></tr>
<tr><td nowrap align=right valign=top>typedef <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Intrusive__List.html">ACE_Intrusive_List</a>&lt;<br>
 <a class="el" href="classTAO__LF__Follower.html">TAO_LF_Follower</a> &gt;&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#u0">Follower_Set</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Implement the Leader/Followers set using an intrusive list.</em> <a href="#u0">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Private Methods</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classTAO__ORB__Core__TSS__Resources.html">TAO_ORB_Core_TSS_Resources</a> *&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#c0">get_tss_resources</a> (void) const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Shortcut to obtain the TSS resources of the orb core.</em> <a href="#c0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#c1">wait_for_client_leader_to_complete</a> (<a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Time__Value.html">ACE_Time_Value</a> *max_wait_time)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Wait for the client leader to complete.</em> <a href="#c1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#c2">reset_event_loop_thread_i</a> (<a class="el" href="classTAO__ORB__Core__TSS__Resources.html">TAO_ORB_Core_TSS_Resources</a> *tss)</td></tr>
<tr><td colspan="2"><div class="groupHeader">Follower Set Operations</div></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#z20_0">elect_new_leader_i</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Remote a follower from the Followers set and promote it to the leader role.</em> <a href="#z20_0">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classTAO__ORB__Core.html">TAO_ORB_Core</a> *&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#o0">orb_core_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The orb core.</em> <a href="#o0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>TAO_SYNCH_MUTEX&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#o1">lock_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>To synchronize access to the members.</em> <a href="#o1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Reverse__Lock.html">ACE_Reverse_Lock</a>&lt; TAO_SYNCH_MUTEX &gt;&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#o2">reverse_lock_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>do protect the access to the following three members.</em> <a href="#o2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classTAO__Leader__Follower.html#u0">Follower_Set</a>&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#o3">follower_set_</a></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classTAO__Leader__Follower.html#u0">Follower_Set</a>&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#o4">follower_free_list_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Use a free list to allocate and release Follower objects.</em> <a href="#o4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#o5">leaders_</a></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#o6">clients_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Count the number of active clients, this is useful to know when to deactivate the reactor.</em> <a href="#o6">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Reactor.html">ACE_Reactor</a> *&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#o7">reactor_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>The reactor.</em> <a href="#o7">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#o8">client_thread_is_leader_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Is a client thread the current leader?</em> <a href="#o8">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#o9">event_loop_threads_waiting_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Are server threads waiting for the client leader to complete?</em> <a href="#o9">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>TAO_SYNCH_CONDITION&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#o10">event_loop_threads_condition_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Condition variable for server threads waiting for the client leader to complete.</em> <a href="#o10">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classTAO__New__Leader__Generator.html">TAO_New_Leader_Generator</a> *&nbsp;</td><td valign=bottom><a class="el" href="classTAO__Leader__Follower.html#o11">new_leader_generator_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Leader/Follower class uses this method to notify the system that we are out of leaders.</em> <a href="#o11">More...</a><em></em></font><br><br></td></tr>
</table>
<hr><h2>Member Typedef Documentation</h2>
<a name="u0" doxytag="TAO_Leader_Follower::Follower_Set"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Intrusive__List.html">ACE_Intrusive_List</a>&lt;<a class="el" href="classTAO__LF__Follower.html">TAO_LF_Follower</a>&gt; TAO_Leader_Follower::Follower_Set<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implement the Leader/Followers set using an intrusive list.
<p>
    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="TAO_Leader_Follower::TAO_Leader_Follower"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> TAO_Leader_Follower::TAO_Leader_Follower </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classTAO__ORB__Core.html">TAO_ORB_Core</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>orb_core</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classTAO__New__Leader__Generator.html">TAO_New_Leader_Generator</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>new_leader_generator</em> = 0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor.
<p>
    </td>
  </tr>
</table>
<a name="a1" doxytag="TAO_Leader_Follower::~TAO_Leader_Follower"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> TAO_Leader_Follower::~TAO_Leader_Follower </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destructor.
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="z19_0" doxytag="TAO_Leader_Follower::add_follower"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> void TAO_Leader_Follower::add_follower </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classTAO__LF__Follower.html">TAO_LF_Follower</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>follower</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Add a new follower to the set.
<p>
    </td>
  </tr>
</table>
<a name="z18_0" doxytag="TAO_Leader_Follower::allocate_follower"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classTAO__LF__Follower.html">TAO_LF_Follower</a> * TAO_Leader_Follower::allocate_follower </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Allocate a new follower to the caller.
<p>
    </td>
  </tr>
</table>
<a name="a13" doxytag="TAO_Leader_Follower::elect_new_leader"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> int TAO_Leader_Follower::elect_new_leader </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A leader thread is relinquishing its role, unless there are more leader threads running pick up a follower (if there is any) to play the leader role.     </td>
  </tr>
</table>
<a name="z20_0" doxytag="TAO_Leader_Follower::elect_new_leader_i"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int TAO_Leader_Follower::elect_new_leader_i </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Remote a follower from the Followers set and promote it to the leader role.
<p>
This is a helper routine for <a class="el" href="classTAO__Leader__Follower.html#a13">elect_new_leader</a>(), after verifying that all the pre-conditions are satisfied the Follower set is changed and the promoted Follower is signaled.     </td>
  </tr>
</table>
<a name="z19_2" doxytag="TAO_Leader_Follower::follower_available"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> int TAO_Leader_Follower::follower_available </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Checks if there are any followers available.
<p>
<dl compact><dt><b>
Returns: </b><dd>
1 if there follower set is not empty </dl>    </td>
  </tr>
</table>
<a name="c0" doxytag="TAO_Leader_Follower::get_tss_resources"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> <a class="el" href="classTAO__ORB__Core__TSS__Resources.html">TAO_ORB_Core_TSS_Resources</a> * TAO_Leader_Follower::get_tss_resources </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const<code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Shortcut to obtain the TSS resources of the orb core.
<p>
    </td>
  </tr>
</table>
<a name="a16" doxytag="TAO_Leader_Follower::has_clients"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> int TAO_Leader_Follower::has_clients </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Check if there are any client threads running.
<p>
    </td>
  </tr>
</table>
<a name="a12" doxytag="TAO_Leader_Follower::is_client_leader_thread"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> int TAO_Leader_Follower::is_client_leader_thread </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
checks if we are a leader thread.
<p>
    </td>
  </tr>
</table>
<a name="a5" doxytag="TAO_Leader_Follower::leader_available"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> int TAO_Leader_Follower::leader_available </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Is there any thread running as a leader?
<p>
    </td>
  </tr>
</table>
<a name="a14" doxytag="TAO_Leader_Follower::lock"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> TAO_SYNCH_MUTEX &amp; TAO_Leader_Follower::lock </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get a reference to the underlying mutex.
<p>
    </td>
  </tr>
</table>
<a name="a18" doxytag="TAO_Leader_Follower::no_leaders_available"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> void TAO_Leader_Follower::no_leaders_available </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called when we are out of leaders.
<p>
    </td>
  </tr>
</table>
<a name="a17" doxytag="TAO_Leader_Follower::reactor"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Reactor.html">ACE_Reactor</a> * TAO_Leader_Follower::reactor </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Accesor to the reactor.
<p>
    </td>
  </tr>
</table>
<a name="z18_1" doxytag="TAO_Leader_Follower::release_follower"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TAO_Leader_Follower::release_follower </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classTAO__LF__Follower.html">TAO_LF_Follower</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>follower</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The caller has finished using a follower.
<p>
    </td>
  </tr>
</table>
<a name="z19_1" doxytag="TAO_Leader_Follower::remove_follower"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> void TAO_Leader_Follower::remove_follower </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classTAO__LF__Follower.html">TAO_LF_Follower</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>follower</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Removes a follower from the leader-follower set.
<p>
    </td>
  </tr>
</table>
<a name="a10" doxytag="TAO_Leader_Follower::reset_client_leader_thread"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> void TAO_Leader_Follower::reset_client_leader_thread </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The current thread is no longer the leader thread in the client side leader-follower set.
<p>
    </td>
  </tr>
</table>
<a name="a7" doxytag="TAO_Leader_Follower::reset_client_thread"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TAO_Leader_Follower::reset_client_thread </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A server thread has finished is making a request.
<p>
    </td>
  </tr>
</table>
<a name="a3" doxytag="TAO_Leader_Follower::reset_event_loop_thread"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> void TAO_Leader_Follower::reset_event_loop_thread </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The current thread is not a server thread anymore, reset any flags and counters.
<p>
    </td>
  </tr>
</table>
<a name="c2" doxytag="TAO_Leader_Follower::reset_event_loop_thread_i"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> void TAO_Leader_Follower::reset_event_loop_thread_i </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classTAO__ORB__Core__TSS__Resources.html">TAO_ORB_Core_TSS_Resources</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>tss</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implement the <a class="el" href="classTAO__Leader__Follower.html#a3">reset_event_loop_thread</a>() method, once the TSS resources have been acquired. Also used in the set_upcall_thread.     </td>
  </tr>
</table>
<a name="a15" doxytag="TAO_Leader_Follower::reverse_lock"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Reverse__Lock.html">ACE_Reverse_Lock</a>&lt; TAO_SYNCH_MUTEX &gt; &amp; TAO_Leader_Follower::reverse_lock </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Provide a pre-initialized reverse lock for the Leader/Followers set.
<p>
The Leader/Followers set mutex must be release during some long running operations. This helper class simplifies the process of releasing and reacquiring said mutex.     </td>
  </tr>
</table>
<a name="a11" doxytag="TAO_Leader_Follower::set_client_leader_thread"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TAO_Leader_Follower::set_client_leader_thread </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8h.html#a347">ACE_thread_t</a>&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>thread_ID</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
sets the thread ID of the leader thread in the leader-follower model.
<p>
    </td>
  </tr>
</table>
<a name="a9" doxytag="TAO_Leader_Follower::set_client_leader_thread"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> void TAO_Leader_Follower::set_client_leader_thread </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The current thread has become the leader thread in the client side leader-follower set.
<p>
    </td>
  </tr>
</table>
<a name="a6" doxytag="TAO_Leader_Follower::set_client_thread"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void TAO_Leader_Follower::set_client_thread </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A server thread is making a request.
<p>
    </td>
  </tr>
</table>
<a name="a2" doxytag="TAO_Leader_Follower::set_event_loop_thread"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> int TAO_Leader_Follower::set_event_loop_thread </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Time__Value.html">ACE_Time_Value</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>max_wait_time</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The current thread has become a server thread (i.e. called ORB::run), update any flags and counters.
<p>
    </td>
  </tr>
</table>
<a name="a4" doxytag="TAO_Leader_Follower::set_upcall_thread"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/OS_8i.html#a0">ACE_INLINE</a> void TAO_Leader_Follower::set_upcall_thread </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This thread is going to perform an upcall, it will no longer be an event loop thread.
<p>
    </td>
  </tr>
</table>
<a name="c1" doxytag="TAO_Leader_Follower::wait_for_client_leader_to_complete"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int TAO_Leader_Follower::wait_for_client_leader_to_complete </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Time__Value.html">ACE_Time_Value</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>max_wait_time</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [private]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Wait for the client leader to complete.
<p>
    </td>
  </tr>
</table>
<a name="a8" doxytag="TAO_Leader_Follower::wait_for_event"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int TAO_Leader_Follower::wait_for_event </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classTAO__LF__Event.html">TAO_LF_Event</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>event</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classTAO__Transport.html">TAO_Transport</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>transport</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Time__Value.html">ACE_Time_Value</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>max_wait_time</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Wait on the Leader/Followers loop until one event happens.
<p>
<dl compact><dt><b>
Parameters: </b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em>event</em>&nbsp;</td><td>
The event we wait for, the loop iterates until the event is sucessful, or it fails due to timeout, and error or a connection closed. </td></tr>
<tr><td valign=top><em>transport</em>&nbsp;</td><td>
The transport attached to the event </td></tr>
<tr><td valign=top><em>max_wait_time</em>&nbsp;</td><td>
Limit the time spent on the loop</td></tr>
</table>
</dl><dl compact><dt><b>
<a class="el" href="todo.html#_todo000010">Todo: </a></b><dd>
 Document this better, split the Follower code to the <a class="el" href="classTAO__LF__Follower.html">TAO_LF_Follower</a> class, we probably don't need the transport object. </dl>     </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="o8" doxytag="TAO_Leader_Follower::client_thread_is_leader_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int TAO_Leader_Follower::client_thread_is_leader_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Is a client thread the current leader?
<p>
    </td>
  </tr>
</table>
<a name="o6" doxytag="TAO_Leader_Follower::clients_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int TAO_Leader_Follower::clients_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Count the number of active clients, this is useful to know when to deactivate the reactor.
<p>
    </td>
  </tr>
</table>
<a name="o10" doxytag="TAO_Leader_Follower::event_loop_threads_condition_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> TAO_SYNCH_CONDITION TAO_Leader_Follower::event_loop_threads_condition_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Condition variable for server threads waiting for the client leader to complete.
<p>
    </td>
  </tr>
</table>
<a name="o9" doxytag="TAO_Leader_Follower::event_loop_threads_waiting_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int TAO_Leader_Follower::event_loop_threads_waiting_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Are server threads waiting for the client leader to complete?
<p>
    </td>
  </tr>
</table>
<a name="o4" doxytag="TAO_Leader_Follower::follower_free_list_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classTAO__Leader__Follower.html#u0">Follower_Set</a> TAO_Leader_Follower::follower_free_list_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Use a free list to allocate and release Follower objects.
<p>
    </td>
  </tr>
</table>
<a name="o3" doxytag="TAO_Leader_Follower::follower_set_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classTAO__Leader__Follower.html#u0">Follower_Set</a> TAO_Leader_Follower::follower_set_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="o5" doxytag="TAO_Leader_Follower::leaders_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int TAO_Leader_Follower::leaders_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Count the number of active leaders. There could be many leaders in the thread pool (i.e. calling ORB::run), and the same leader could show up multiple times as it receives nested upcalls and sends more requests.     </td>
  </tr>
</table>
<a name="o1" doxytag="TAO_Leader_Follower::lock_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> TAO_SYNCH_MUTEX TAO_Leader_Follower::lock_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
To synchronize access to the members.
<p>
    </td>
  </tr>
</table>
<a name="o11" doxytag="TAO_Leader_Follower::new_leader_generator_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classTAO__New__Leader__Generator.html">TAO_New_Leader_Generator</a>* TAO_Leader_Follower::new_leader_generator_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Leader/Follower class uses this method to notify the system that we are out of leaders.
<p>
    </td>
  </tr>
</table>
<a name="o0" doxytag="TAO_Leader_Follower::orb_core_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classTAO__ORB__Core.html">TAO_ORB_Core</a>* TAO_Leader_Follower::orb_core_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The orb core.
<p>
    </td>
  </tr>
</table>
<a name="o7" doxytag="TAO_Leader_Follower::reactor_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Reactor.html">ACE_Reactor</a>* TAO_Leader_Follower::reactor_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The reactor.
<p>
    </td>
  </tr>
</table>
<a name="o2" doxytag="TAO_Leader_Follower::reverse_lock_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="elRef" doxygen="ACE.tag:../ace/" href="../ace/classACE__Reverse__Lock.html">ACE_Reverse_Lock</a>&lt;TAO_SYNCH_MUTEX&gt; TAO_Leader_Follower::reverse_lock_<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
do protect the access to the following three members.
<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Leader__Follower_8h.html">Leader_Follower.h</a><li><a class="el" href="Leader__Follower_8cpp.html">Leader_Follower.cpp</a><li><a class="el" href="Leader__Follower_8i.html">Leader_Follower.i</a></ul>
<hr><address><small>Generated on Wed Jan 15 20:42:14 2003 for TAO by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.13.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
