<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ACE_NT_Service class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>ACE_NT_Service  Class Reference</h1>Provide the base class which defines the interface for controlling an NT service. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;NT_Service.h&gt;</code>
<p>
Inheritance diagram for ACE_NT_Service:<p><center><img src="classACE__NT__Service__inherit__graph.gif" border="0" usemap="#ACE__NT__Service__inherit__map" alt="Inheritance graph"></center>
<map name="ACE__NT__Service__inherit__map">
<area href="classACE__Task.html" shape="rect" coords="65,321,270,340" alt="">
<area href="classACE__Task__Base.html" shape="rect" coords="102,159,211,177" alt="">
<area href="classACE__Task.html" shape="rect" coords="169,231,259,249" alt="">
<area href="classACE__Service__Object.html" shape="rect" coords="89,87,225,105" alt="">
<area href="classACE__Event__Handler.html" shape="rect" coords="14,15,145,33" alt="">
<area href="classACE__Shared__Object.html" shape="rect" coords="169,15,302,33" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for ACE_NT_Service:<p><center><img src="classACE__NT__Service__coll__graph.gif" border="0" usemap="#ACE__NT__Service__coll__map" alt="Collaboration graph"></center>
<map name="ACE__NT__Service__coll__map">
<area href="classACE__Task.html" shape="rect" coords="26,7,231,26" alt="">
<area href="classACE__OS__Log__Msg__Attributes.html" shape="rect" coords="35,65,222,83" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classACE__NT__Service-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a0">ACE_NT_Service</a> (DWORD start_timeout=ACE_NT_SERVICE_START_TIMEOUT, DWORD service_type=SERVICE_WIN32_OWN_PROCESS, DWORD controls_mask=SERVICE_ACCEPT_STOP)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Constructor primarily for use when running the service.</em> <a href="#a0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a1">ACE_NT_Service</a> (<a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *name, <a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *desc=0, DWORD start_timeout=ACE_NT_SERVICE_START_TIMEOUT, DWORD service_type=SERVICE_WIN32_OWN_PROCESS, DWORD controls_mask=SERVICE_ACCEPT_STOP)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Constructor primarily for use when inserting/removing/controlling the service.</em> <a href="#a1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a2">~ACE_NT_Service</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a3">open</a> (void *args=0)</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a4">fini</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a5">svc</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a6">handle_control</a> (DWORD control_code)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a7">svc_handle</a> (<a class="el" href="classACE__Task.html#m0">const</a> SERVICE_STATUS_HANDLE new_svc_handle)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Set the svc_handle_ member. This is only a public function because the macro-generated service function calls it.</em> <a href="#a7">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a8">name</a> (<a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *name, <a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *desc=0)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Sets the name and description for the service. If desc is 0, it takes the same value as name.</em> <a href="#a8">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a9">name</a> (void) <a class="el" href="classACE__Task.html#m0">const</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Get the service name.</em> <a href="#a9">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a10">desc</a> (void) <a class="el" href="classACE__Task.html#m0">const</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Get the service description.</em> <a href="#a10">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a11">host</a> (<a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *host)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Sets the host machine.</em> <a href="#a11">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a12">host</a> (void) <a class="el" href="classACE__Task.html#m0">const</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Get the host machine.</em> <a href="#a12">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a13">insert</a> (DWORD start_type=SERVICE_DEMAND_START, DWORD error_control=SERVICE_ERROR_IGNORE, <a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *exe_path=0, <a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *group_name=0, LPDWORD tag_id=0, <a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *dependencies=0, <a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *account_name=0, <a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *password=0)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a14">remove</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a15">startup</a> (DWORD startup)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Sets the startup type for the service. Returns -1 on error, 0 on success.</em> <a href="#a15">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>DWORD&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a16">startup</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Returns the current startup type.</em> <a href="#a16">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a17">capture_log_msg_attributes</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a18">inherit_log_msg_attributes</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a19">start_svc</a> (<a class="el" href="classACE__Time__Value.html">ACE_Time_Value</a> *wait_time=0, DWORD *svc_state=0, DWORD argc=0, <a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> **argv=0)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a20">stop_svc</a> (<a class="el" href="classACE__Time__Value.html">ACE_Time_Value</a> *wait_time=0, DWORD *svc_state=0)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a21">pause_svc</a> (<a class="el" href="classACE__Time__Value.html">ACE_Time_Value</a> *wait_time=0, DWORD *svc_state=0)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Pause the service.</em> <a href="#a21">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a22">continue_svc</a> (<a class="el" href="classACE__Time__Value.html">ACE_Time_Value</a> *wait_time=0, DWORD *svc_state=0)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Continue the service.</em> <a href="#a22">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>DWORD&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a23">state</a> (<a class="el" href="classACE__Time__Value.html">ACE_Time_Value</a> *wait_hint=0)</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a24">state</a> (DWORD *pstate, <a class="el" href="classACE__Time__Value.html">ACE_Time_Value</a> *wait_hint=0)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>A version of &lt;state&gt; that returns -1 for failure, 0 for success. The DWORD pointed to by pstate receives the state value.</em> <a href="#a24">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#a25">test_access</a> (DWORD desired_access=SERVICE_ALL_ACCESS)</td></tr>
<tr><td colspan=2><br><h2>Public Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#m0">ACE_ALLOC_HOOK_DECLARE</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Declare the dynamic allocation hooks.</em> <a href="#m0">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Protected Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#b0">report_status</a> (DWORD new_status, DWORD time_hint=0)</td></tr>
<tr><td nowrap align=right valign=top>SC_HANDLE&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#b1">svc_sc_handle</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#b2">wait_for_service_state</a> (DWORD desired_state, <a class="el" href="classACE__Time__Value.html">ACE_Time_Value</a> *wait_time)</td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#b3">stop_requested</a> (DWORD control_code)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Called by &lt;handle_control&gt; when a stop/shutdown was requested.</em> <a href="#b3">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#b4">pause_requested</a> (DWORD control_code)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Called by &lt;handle_control&gt; when a pause was requested.</em> <a href="#b4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#b5">continue_requested</a> (DWORD control_code)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Called by &lt;handle_control&gt; when a continue was requested.</em> <a href="#b5">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#b6">interrogate_requested</a> (DWORD control_code)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Called by &lt;handle_control&gt; when a interrogate was requested.</em> <a href="#b6">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Protected Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top>DWORD&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#n0">start_time_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Estimate of init time needed.</em> <a href="#n0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>SERVICE_STATUS_HANDLE&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#n1">svc_handle_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Service handle - doesn't need close.</em> <a href="#n1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>SERVICE_STATUS&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#n2">svc_status_</a></td></tr>
<tr><td nowrap align=right valign=top>SC_HANDLE&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#n3">svc_sc_handle_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Service's SCM handle.</em> <a href="#n3">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#n4">name_</a></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#n5">desc_</a></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#n6">host_</a></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classACE__OS__Log__Msg__Attributes.html">ACE_OS_Log_Msg_Attributes</a>&nbsp;</td><td valign=bottom><a class="el" href="classACE__NT__Service.html#n7">log_msg_attributes_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em><a class="el" href="classACE__Log__Msg.html">ACE_Log_Msg</a> attributes to inherit from the starting thread.</em> <a href="#n7">More...</a><em></em></font><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Provide the base class which defines the interface for controlling an NT service.
<p>

<p>
 NT Services can be implemented using the framework defined by the ACE_NT_Service class, and the macros defined in this file. Some quick refresher notes on NT Services:
<p>
<ul>
<li>The main program defines an array of entries describing the services offered. The ACE_NT_SERVICE_ENTRY macro can help with this.<li>For each service, a separate ServiceMain and Handler function need to be defined. These are taken care of by the ACE_NT_SERVICE_DEFINE macro.<li>When the main program/thread calls StartServiceCtrlDispatcher, NT creates a thread for each service, and runs the ServiceMain function for the service in that new thread. When that thread exits, the service is gone.</ul>
To use this facility, you could derive a class from <a class="el" href="classACE__Service__Object.html">ACE_Service_Object</a> (if you want to start via <a class="el" href="classACE.html">ACE</a>'s service configurator), or use any other class to run when the image starts (assuming that NT runs the image). You must set up an NT SERVICE_TABLE_ENTRY array to define your service(s). You can use the ACE_NT_SERVICE_... macros defined below for this.
<p>
A SERVICE_TABLE might look like this: <a class="el" href="NT__Service_8h.html#a2">ACE_NT_SERVICE_REFERENCE</a>(Svc1); // If service is in another file SERVICE_TABLE_ENTRY myServices[] = { ACE_NT_SERVICE_ENTRY ("MyNeatService", Svc1), { 0, 0 } };
<p>
In the file where your service(s) are implemented, use the ACE_NT_SERVICE_DEFINE macro to set up the following: 1. A pointer to the service's implementation object (must be derived from ACE_NT_Service). 2. The service's Handler function (forwards all requests to the ACE_NT_Service-derived object's handle_control function). 3. The service's ServiceMain function. Creates a new instance of the ACE_NT_Service-derived class SVCCLASS, unless one has been created already.
<p>
If you are using all the default constructor values, you can let the generated ServiceMain function create the object, else you need to create it by hand before calling StartServiceCtrlDispatcher. Set the pointer so ServiceMain won't create another one. Another reason you may want to do the object creation yourself is if you want to also implement suspend and resume functions (the ones inherited from <a class="el" href="classACE__Service__Object.html">ACE_Service_Object</a>) to do something intelligent to the services which are running, like call their handle_control functions to request suspend and resume actions, similar to what NT would do if a Services control panel applet would do if the user clicks on Suspend. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="ACE_NT_Service::ACE_NT_Service"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_INLINE ACE_NT_Service::ACE_NT_Service </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">DWORD&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>start_timeout</em> = ACE_NT_SERVICE_START_TIMEOUT, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>DWORD&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>service_type</em> = SERVICE_WIN32_OWN_PROCESS, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>DWORD&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>controls_mask</em> = SERVICE_ACCEPT_STOP</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor primarily for use when running the service.
<p>
    </td>
  </tr>
</table>
<a name="a1" doxytag="ACE_NT_Service::ACE_NT_Service"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_INLINE ACE_NT_Service::ACE_NT_Service </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>name</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>desc</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>DWORD&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>start_timeout</em> = ACE_NT_SERVICE_START_TIMEOUT, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>DWORD&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>service_type</em> = SERVICE_WIN32_OWN_PROCESS, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>DWORD&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>controls_mask</em> = SERVICE_ACCEPT_STOP</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Constructor primarily for use when inserting/removing/controlling the service.
<p>
    </td>
  </tr>
</table>
<a name="a2" doxytag="ACE_NT_Service::~ACE_NT_Service"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_NT_Service::~ACE_NT_Service </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a17" doxytag="ACE_NT_Service::capture_log_msg_attributes"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ACE_NT_Service::capture_log_msg_attributes </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the <a class="el" href="classACE__Log__Msg.html">ACE_Log_Msg</a> attributes that the service thread will use to initialize its <a class="el" href="classACE__Log__Msg.html">ACE_Log_Msg</a> instance. This is how the initiating thread's logging ostream, etc. get into the service thread. The logging attributes in effect when this function is called are what the service thread will have at its disposal when it starts; therefore, the main thread should set up logging options for the process, and call this function just before calling the StartServiceCtrlDispatcher function.     </td>
  </tr>
</table>
<a name="b5" doxytag="ACE_NT_Service::continue_requested"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ACE_NT_Service::continue_requested </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">DWORD&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>control_code</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called by &lt;handle_control&gt; when a continue was requested.
<p>
    </td>
  </tr>
</table>
<a name="a22" doxytag="ACE_NT_Service::continue_svc"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_NT_Service::continue_svc </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classACE__Time__Value.html">ACE_Time_Value</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>wait_time</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>DWORD *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>svc_state</em> = 0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Continue the service.
<p>
    </td>
  </tr>
</table>
<a name="a10" doxytag="ACE_NT_Service::desc"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_INLINE <a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> * ACE_NT_Service::desc </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the service description.
<p>
    </td>
  </tr>
</table>
<a name="a4" doxytag="ACE_NT_Service::fini"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_NT_Service::fini </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Hook called when terminating the service. Inherited from <a class="el" href="classACE__Shared__Object.html">ACE_Shared_Object</a>. Default implementation sets the service status to SERVICE_STOPPED. 
<p>
Reimplemented from <a class="el" href="classACE__Shared__Object.html#a2">ACE_Shared_Object</a>.    </td>
  </tr>
</table>
<a name="a6" doxytag="ACE_NT_Service::handle_control"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ACE_NT_Service::handle_control </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">DWORD&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>control_code</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
This function is called in response to a request from the Service Dispatcher. It must interact with the &lt;svc&gt; function to effect the requested control operation. The default implementation handles all requests as follows: SERVICE_CONTROL_STOP: set stop pending, set cancel flag SERVICE_CONTROL_PAUSE: set pause pending, &lt;suspend&gt;, set paused SERVICE_CONTROL_CONTINUE: set continue pending, &lt;resume&gt;, set running SERVICE_CONTROL_INTERROGATE: reports current status SERVICE_CONTROL_SHUTDOWN: same as SERVICE_CONTROL_STOP.     </td>
  </tr>
</table>
<a name="a12" doxytag="ACE_NT_Service::host"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_INLINE <a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> * ACE_NT_Service::host </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the host machine.
<p>
    </td>
  </tr>
</table>
<a name="a11" doxytag="ACE_NT_Service::host"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ACE_NT_Service::host </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>host</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the host machine.
<p>
    </td>
  </tr>
</table>
<a name="a18" doxytag="ACE_NT_Service::inherit_log_msg_attributes"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ACE_NT_Service::inherit_log_msg_attributes </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the <a class="el" href="classACE__Log__Msg.html">ACE_Log_Msg</a> attributes in the current thread to those saved in the most recent call to <code><a class="el" href="classACE__NT__Service.html#a17">capture_log_msg_attributes</a>()</code>. This function should be called from the service's service thread. Ideally, it is the first method called to be sure that any logging done is incorporated correctly into the process's established logging setup.     </td>
  </tr>
</table>
<a name="a13" doxytag="ACE_NT_Service::insert"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_NT_Service::insert </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">DWORD&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>start_type</em> = SERVICE_DEMAND_START, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>DWORD&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>error_control</em> = SERVICE_ERROR_IGNORE, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>exe_path</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>group_name</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>LPDWORD&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>tag_id</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>dependencies</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>account_name</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>password</em> = 0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Insert (create) the service in the NT Service Control Manager, with the given creation values. exe_path defaults to the path name of the program that calls the function. All other 0-defaulted arguments pass 0 into the service creation, taking NT_specified defaults. Returns -1 on error, 0 on success.     </td>
  </tr>
</table>
<a name="b6" doxytag="ACE_NT_Service::interrogate_requested"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ACE_NT_Service::interrogate_requested </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">DWORD&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>control_code</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called by &lt;handle_control&gt; when a interrogate was requested.
<p>
    </td>
  </tr>
</table>
<a name="a9" doxytag="ACE_NT_Service::name"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_INLINE <a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> * ACE_NT_Service::name </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the service name.
<p>

<p>
Reimplemented from <a class="el" href="classACE__Task.html#a10">ACE_Task</a>.    </td>
  </tr>
</table>
<a name="a8" doxytag="ACE_NT_Service::name"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ACE_NT_Service::name </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>name</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>desc</em> = 0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the name and description for the service. If desc is 0, it takes the same value as name.
<p>
    </td>
  </tr>
</table>
<a name="a3" doxytag="ACE_NT_Service::open"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_NT_Service::open </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>args</em> = 0          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Hook called to open the service. By default, sets the service status to SERVICE_START_PENDING, calls the <code><a class="el" href="classACE__NT__Service.html#a5">svc</a>()</code> method, interprets and sets the service status, and returns. 
<p>
Reimplemented from <a class="el" href="classACE__Task__Base.html#a2">ACE_Task_Base</a>.    </td>
  </tr>
</table>
<a name="b4" doxytag="ACE_NT_Service::pause_requested"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ACE_NT_Service::pause_requested </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">DWORD&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>control_code</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called by &lt;handle_control&gt; when a pause was requested.
<p>
    </td>
  </tr>
</table>
<a name="a21" doxytag="ACE_NT_Service::pause_svc"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_NT_Service::pause_svc </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classACE__Time__Value.html">ACE_Time_Value</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>wait_time</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>DWORD *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>svc_state</em> = 0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Pause the service.
<p>
    </td>
  </tr>
</table>
<a name="a14" doxytag="ACE_NT_Service::remove"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_NT_Service::remove </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Remove the service from the NT Service Control Manager. Returns -1 on error, 0 on success. This just affects the SCM and registry - the can and will keep running fine if it is already running.     </td>
  </tr>
</table>
<a name="b0" doxytag="ACE_NT_Service::report_status"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_NT_Service::report_status </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">DWORD&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>new_status</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>DWORD&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>time_hint</em> = 0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a19" doxytag="ACE_NT_Service::start_svc"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_NT_Service::start_svc </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classACE__Time__Value.html">ACE_Time_Value</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>wait_time</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>DWORD *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>svc_state</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>DWORD&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>argc</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classACE__Task.html#m0">const</a> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> **&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>argv</em> = 0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Start the service (must have been inserted before). wait_time is the time to wait for the service to reach a steady state before returning. If it is 0, the function waits as long as it takes for the service to reach the 'running' state, or gets stuck in some other state, or exits. If &lt;wait_time&gt; is supplied, it is updated on return to hold the service's last reported wait hint. svc_state can be used to receive the state which the service settled in. If the value is 0, the service never ran. argc/argv are passed to the service's ServiceMain function when it starts. Returns 0 for success, -1 for error.     </td>
  </tr>
</table>
<a name="a16" doxytag="ACE_NT_Service::startup"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> DWORD ACE_NT_Service::startup </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Returns the current startup type.
<p>
    </td>
  </tr>
</table>
<a name="a15" doxytag="ACE_NT_Service::startup"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_NT_Service::startup </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">DWORD&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>startup</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sets the startup type for the service. Returns -1 on error, 0 on success.
<p>
    </td>
  </tr>
</table>
<a name="a24" doxytag="ACE_NT_Service::state"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_NT_Service::state </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">DWORD *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>pstate</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classACE__Time__Value.html">ACE_Time_Value</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>wait_hint</em> = 0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
A version of &lt;state&gt; that returns -1 for failure, 0 for success. The DWORD pointed to by pstate receives the state value.
<p>
    </td>
  </tr>
</table>
<a name="a23" doxytag="ACE_NT_Service::state"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> DWORD ACE_NT_Service::state </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classACE__Time__Value.html">ACE_Time_Value</a> *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>wait_hint</em> = 0          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Get the current state for the service. If &lt;wait_hint&gt; is not 0, it receives the service's reported wait hint. Note that this function returns 0 on failure (not -1 as is usual in <a class="el" href="classACE.html">ACE</a>). A zero return would (probably) only be returned if there is either no service with the given name in the SCM database, or the caller does not have sufficient rights to access the service state. The set of valid service state values are all greater than 0.     </td>
  </tr>
</table>
<a name="b3" doxytag="ACE_NT_Service::stop_requested"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ACE_NT_Service::stop_requested </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">DWORD&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>control_code</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Called by &lt;handle_control&gt; when a stop/shutdown was requested.
<p>
    </td>
  </tr>
</table>
<a name="a20" doxytag="ACE_NT_Service::stop_svc"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_NT_Service::stop_svc </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classACE__Time__Value.html">ACE_Time_Value</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>wait_time</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>DWORD *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>svc_state</em> = 0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Requests the service to stop. Will wait up to &lt;wait_time&gt; for the service to actually stop. If not specified, the function waits until the service either stops or gets stuck in some other state before it stops. If &lt;svc_state&gt; is specified, it receives the last reported state of the service. Returns 0 if the request was made successfully, -1 if not.     </td>
  </tr>
</table>
<a name="a5" doxytag="ACE_NT_Service::svc"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_INLINE int ACE_NT_Service::svc </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
The actual service implementation. This function need not be overridden by applications that are just using SCM capabilities, but must be by subclasses when actually running the service. It is expected that this function will set the status to RUNNING. 
<p>
Reimplemented from <a class="el" href="classACE__Task__Base.html#a6">ACE_Task_Base</a>.    </td>
  </tr>
</table>
<a name="a7" doxytag="ACE_NT_Service::svc_handle"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_INLINE void ACE_NT_Service::svc_handle </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="classACE__Task.html#m0">const</a> SERVICE_STATUS_HANDLE&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>new_svc_handle</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Set the svc_handle_ member. This is only a public function because the macro-generated service function calls it.
<p>
    </td>
  </tr>
</table>
<a name="b1" doxytag="ACE_NT_Service::svc_sc_handle"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> SC_HANDLE ACE_NT_Service::svc_sc_handle </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return the svc_sc_handle_ member. If the member is null, it retrieves the handle from the Service Control Manager and caches it.     </td>
  </tr>
</table>
<a name="a25" doxytag="ACE_NT_Service::test_access"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_NT_Service::test_access </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">DWORD&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>desired_access</em> = SERVICE_ALL_ACCESS          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Test access to the object's service in the SCM. The service must already have been inserted in the SCM database. This function has no affect on the service itself. Returns 0 if the specified access is allowed, -1 otherwise (either the access is denied, or there is a problem with the service's definition - check <a class="el" href="classACE__OS.html#z27_0">ACE_OS::last_error</a> to get the specific error indication.     </td>
  </tr>
</table>
<a name="b2" doxytag="ACE_NT_Service::wait_for_service_state"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ACE_NT_Service::wait_for_service_state </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">DWORD&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>desired_state</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="classACE__Time__Value.html">ACE_Time_Value</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>wait_time</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Waits for the service to reach &lt;desired_state&gt; or get (apparently) stuck before it reaches that state. Will wait at most &lt;wait_time&gt; to get to the desired state. If &lt;wait_time&gt; is 0, then the function keeps waiting until the desired state is reached or the service doesn't update its state any further. The svc_status_ class member is updated upon return. NOTE - the timeout doesn't currently work - it always acts like <a class="el" href="classACE__Time__Value.html#p0">ACE_Time_Value::zero</a> is passed - it checks the state once but doesn't wait after that.     </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="m0" doxytag="ACE_NT_Service::ACE_ALLOC_HOOK_DECLARE"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_NT_Service::ACE_ALLOC_HOOK_DECLARE
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Declare the dynamic allocation hooks.
<p>

<p>
Reimplemented from <a class="el" href="classACE__Task.html#m5">ACE_Task</a>.    </td>
  </tr>
</table>
<a name="n5" doxytag="ACE_NT_Service::desc_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a>* ACE_NT_Service::desc_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="n6" doxytag="ACE_NT_Service::host_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a>* ACE_NT_Service::host_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="n7" doxytag="ACE_NT_Service::log_msg_attributes_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classACE__OS__Log__Msg__Attributes.html">ACE_OS_Log_Msg_Attributes</a> ACE_NT_Service::log_msg_attributes_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<a class="el" href="classACE__Log__Msg.html">ACE_Log_Msg</a> attributes to inherit from the starting thread.
<p>
    </td>
  </tr>
</table>
<a name="n4" doxytag="ACE_NT_Service::name_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a>* ACE_NT_Service::name_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="n0" doxytag="ACE_NT_Service::start_time_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> DWORD ACE_NT_Service::start_time_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Estimate of init time needed.
<p>
    </td>
  </tr>
</table>
<a name="n1" doxytag="ACE_NT_Service::svc_handle_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> SERVICE_STATUS_HANDLE ACE_NT_Service::svc_handle_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Service handle - doesn't need close.
<p>
    </td>
  </tr>
</table>
<a name="n3" doxytag="ACE_NT_Service::svc_sc_handle_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> SC_HANDLE ACE_NT_Service::svc_sc_handle_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Service's SCM handle.
<p>
    </td>
  </tr>
</table>
<a name="n2" doxytag="ACE_NT_Service::svc_status_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> SERVICE_STATUS ACE_NT_Service::svc_status_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="NT__Service_8h.html">NT_Service.h</a><li><a class="el" href="NT__Service_8cpp.html">NT_Service.cpp</a><li><a class="el" href="NT__Service_8i.html">NT_Service.i</a></ul>
<hr><address><small>Generated on Wed Jan 15 19:10:59 2003 for ACE by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.13.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
