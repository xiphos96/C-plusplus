<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ACE_Adaptive_Lock class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>ACE_Adaptive_Lock  Class Reference</h1>An adaptive general locking class that defers the decision of lock type to run time. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;Synch.h&gt;</code>
<p>
Inheritance diagram for ACE_Adaptive_Lock:<p><center><img src="classACE__Adaptive__Lock__inherit__graph.gif" border="0" usemap="#ACE__Adaptive__Lock__inherit__map" alt="Inheritance graph"></center>
<map name="ACE__Adaptive__Lock__inherit__map">
<area href="classACE__Lock.html" shape="rect" coords="43,15,115,34" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for ACE_Adaptive_Lock:<p><center><img src="classACE__Adaptive__Lock__coll__graph.gif" border="0" usemap="#ACE__Adaptive__Lock__coll__map" alt="Collaboration graph"></center>
<map name="ACE__Adaptive__Lock__coll__map">
<area href="classACE__Lock.html" shape="rect" coords="43,15,115,33" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classACE__Adaptive__Lock-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>virtual&nbsp;</td><td valign=bottom><a class="el" href="classACE__Adaptive__Lock.html#a0">~ACE_Adaptive_Lock</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>You must also override the destructor function to match with how you construct the underneath &lt;lock_&gt;.</em> <a href="#a0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__Adaptive__Lock.html#a1">remove</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__Adaptive__Lock.html#a2">acquire</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Block the thread until the lock is acquired. Returns -1 on failure.</em> <a href="#a2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__Adaptive__Lock.html#a3">tryacquire</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__Adaptive__Lock.html#a4">release</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Release the lock. Returns -1 on failure.</em> <a href="#a4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__Adaptive__Lock.html#a5">acquire_read</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__Adaptive__Lock.html#a6">acquire_write</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__Adaptive__Lock.html#a7">tryacquire_read</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__Adaptive__Lock.html#a8">tryacquire_write</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__Adaptive__Lock.html#a9">tryacquire_write_upgrade</a> (void)</td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="classACE__Adaptive__Lock.html#a10">dump</a> (void) const</td></tr>
<tr><td colspan=2><br><h2>Protected Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__Adaptive__Lock.html#b0">ACE_Adaptive_Lock</a> (void)</td></tr>
<tr><td colspan=2><br><h2>Protected Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classACE__Lock.html">ACE_Lock</a> *&nbsp;</td><td valign=bottom><a class="el" href="classACE__Adaptive__Lock.html#n0">lock_</a></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
An adaptive general locking class that defers the decision of lock type to run time.
<p>

<p>
 This class, as <a class="el" href="classACE__Lock.html">ACE_Lock</a>, provide a set of general locking APIs. However, it defers our decision of what kind of lock to use to the run time and delegates all locking operations to the actual lock. Users must define a constructor in their subclass to initialize &lt;lock_&gt;. 
<p>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="ACE_Adaptive_Lock::~ACE_Adaptive_Lock"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_Adaptive_Lock::~ACE_Adaptive_Lock </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
You must also override the destructor function to match with how you construct the underneath &lt;lock_&gt;.
<p>
    </td>
  </tr>
</table>
<a name="b0" doxytag="ACE_Adaptive_Lock::ACE_Adaptive_Lock"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_Adaptive_Lock::ACE_Adaptive_Lock </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Create and initialize create the actual lcok used in the class. The default constructor simply set the &lt;lock_&gt; to 0 (null). You must overwrite this method for this class to work.     </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a2" doxytag="ACE_Adaptive_Lock::acquire"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_Adaptive_Lock::acquire </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Block the thread until the lock is acquired. Returns -1 on failure.
<p>

<p>
Reimplemented from <a class="el" href="classACE__Lock.html#a3">ACE_Lock</a>.    </td>
  </tr>
</table>
<a name="a5" doxytag="ACE_Adaptive_Lock::acquire_read"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_Adaptive_Lock::acquire_read </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Block until the thread acquires a read lock. If the locking mechanism doesn't support read locks then this just calls &lt;acquire&gt;. Returns -1 on failure. 
<p>
Reimplemented from <a class="el" href="classACE__Lock.html#a6">ACE_Lock</a>.    </td>
  </tr>
</table>
<a name="a6" doxytag="ACE_Adaptive_Lock::acquire_write"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_Adaptive_Lock::acquire_write </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Block until the thread acquires a write lock. If the locking mechanism doesn't support read locks then this just calls &lt;acquire&gt;. Returns -1 on failure. 
<p>
Reimplemented from <a class="el" href="classACE__Lock.html#a7">ACE_Lock</a>.    </td>
  </tr>
</table>
<a name="a10" doxytag="ACE_Adaptive_Lock::dump"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ACE_Adaptive_Lock::dump </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a4" doxytag="ACE_Adaptive_Lock::release"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_Adaptive_Lock::release </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Release the lock. Returns -1 on failure.
<p>

<p>
Reimplemented from <a class="el" href="classACE__Lock.html#a5">ACE_Lock</a>.    </td>
  </tr>
</table>
<a name="a1" doxytag="ACE_Adaptive_Lock::remove"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_Adaptive_Lock::remove </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Explicitly destroy the lock. Note that only one thread should call this method since it doesn't protect against race conditions. 
<p>
Reimplemented from <a class="el" href="classACE__Lock.html#a2">ACE_Lock</a>.    </td>
  </tr>
</table>
<a name="a3" doxytag="ACE_Adaptive_Lock::tryacquire"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_Adaptive_Lock::tryacquire </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Conditionally acquire the lock (i.e., won't block). Returns -1 on failure. If we "failed" because someone else already had the lock, &lt;errno&gt; is set to &lt;EBUSY&gt;. 
<p>
Reimplemented from <a class="el" href="classACE__Lock.html#a4">ACE_Lock</a>.    </td>
  </tr>
</table>
<a name="a7" doxytag="ACE_Adaptive_Lock::tryacquire_read"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_Adaptive_Lock::tryacquire_read </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Conditionally acquire a read lock. If the locking mechanism doesn't support read locks then this just calls &lt;acquire&gt;. Returns -1 on failure. If we "failed" because someone else already had the lock, &lt;errno&gt; is set to &lt;EBUSY&gt;. 
<p>
Reimplemented from <a class="el" href="classACE__Lock.html#a8">ACE_Lock</a>.    </td>
  </tr>
</table>
<a name="a8" doxytag="ACE_Adaptive_Lock::tryacquire_write"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_Adaptive_Lock::tryacquire_write </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Conditionally acquire a write lock. If the locking mechanism doesn't support read locks then this just calls &lt;acquire&gt;. Returns -1 on failure. If we "failed" because someone else already had the lock, &lt;errno&gt; is set to &lt;EBUSY&gt;. 
<p>
Reimplemented from <a class="el" href="classACE__Lock.html#a9">ACE_Lock</a>.    </td>
  </tr>
</table>
<a name="a9" doxytag="ACE_Adaptive_Lock::tryacquire_write_upgrade"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_Adaptive_Lock::tryacquire_write_upgrade </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Conditionally try to upgrade a lock held for read to a write lock. If the locking mechanism doesn't support read locks then this just calls &lt;acquire&gt;. Returns 0 on success, -1 on failure. 
<p>
Reimplemented from <a class="el" href="classACE__Lock.html#a10">ACE_Lock</a>.    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="n0" doxytag="ACE_Adaptive_Lock::lock_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classACE__Lock.html">ACE_Lock</a>* ACE_Adaptive_Lock::lock_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Synch_8h.html">Synch.h</a><li><a class="el" href="Synch_8cpp.html">Synch.cpp</a></ul>
<hr><address><small>Generated on Wed Jan 15 19:06:38 2003 for ACE by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.13.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
