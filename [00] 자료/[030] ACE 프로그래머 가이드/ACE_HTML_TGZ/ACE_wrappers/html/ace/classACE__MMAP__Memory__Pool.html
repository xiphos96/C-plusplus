<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>ACE_MMAP_Memory_Pool class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body bgcolor="#ffffff">
<!-- Generated by Doxygen 1.2.13.1 -->
<center>
<a class="qindex" href="index.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="classes.html">Alphabetical List</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; <a class="qindex" href="pages.html">Related Pages</a> &nbsp; </center>
<hr><h1>ACE_MMAP_Memory_Pool  Class Reference</h1>Make a memory pool that is based on &lt;mmap(2)&gt;. This implementation allows memory to be shared between processes. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;Memory_Pool.h&gt;</code>
<p>
Inheritance diagram for ACE_MMAP_Memory_Pool:<p><center><img src="classACE__MMAP__Memory__Pool__inherit__graph.gif" border="0" usemap="#ACE__MMAP__Memory__Pool__inherit__map" alt="Inheritance graph"></center>
<map name="ACE__MMAP__Memory__Pool__inherit__map">
<area href="classACE__Lite__MMAP__Memory__Pool.html" shape="rect" coords="14,153,211,172" alt="">
<area href="classACE__Event__Handler.html" shape="rect" coords="47,15,178,33" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center>Collaboration diagram for ACE_MMAP_Memory_Pool:<p><center><img src="classACE__MMAP__Memory__Pool__coll__graph.gif" border="0" usemap="#ACE__MMAP__Memory__Pool__coll__map" alt="Collaboration graph"></center>
<map name="ACE__MMAP__Memory__Pool__coll__map">
<area href="classACE__Event__Handler.html" shape="rect" coords="14,196,145,215" alt="">
<area href="classACE__Sig__Handler.html" shape="rect" coords="78,287,198,305" alt="">
<area href="classACE__Reactor.html" shape="rect" coords="34,105,125,124" alt="">
<area href="classACE__Reactor__Impl.html" shape="rect" coords="18,15,141,33" alt="">
<area href="classACE__Mem__Map.html" shape="rect" coords="229,287,338,305" alt="">
</map>
<center><font size="2">[<a href="graph_legend.html">legend</a>]</font></center><a href="classACE__MMAP__Memory__Pool-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Types</h2></td></tr>
<tr><td nowrap align=right valign=top>typedef <a class="el" href="classACE__MMAP__Memory__Pool__Options.html">ACE_MMAP_Memory_Pool_Options</a>&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#s0">OPTIONS</a></td></tr>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#a0">ACE_MMAP_Memory_Pool</a> (const <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *backing_store_name=0, const <a class="el" href="classACE__MMAP__Memory__Pool.html#s0">OPTIONS</a> *options=0)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Initialize the pool.</em> <a href="#a0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#a1">~ACE_MMAP_Memory_Pool</a> (void)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Destructor.</em> <a href="#a1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual void *&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#a2">init_acquire</a> (size_t nbytes, size_t &amp;rounded_bytes, int &amp;first_time)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Ask system for initial chunk of shared memory.</em> <a href="#a2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual void *&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#a3">acquire</a> (size_t nbytes, size_t &amp;rounded_bytes)</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#a4">release</a> (int destroy=1)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Instruct the memory pool to release all of its resources.</em> <a href="#a4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#a5">sync</a> (<a class="el" href="Basic__Types_8h.html#a38">ssize_t</a> len=-1, int flags=MS_SYNC)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Sync the memory region to the backing store starting at &lt;this-&gt;base_addr_&gt;.</em> <a href="#a5">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#a6">sync</a> (void *addr, size_t len, int flags=MS_SYNC)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Sync the memory region to the backing store starting at &lt;addr_&gt;.</em> <a href="#a6">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#a7">protect</a> (<a class="el" href="Basic__Types_8h.html#a38">ssize_t</a> len=-1, int prot=PROT_RDWR)</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#a8">protect</a> (void *addr, size_t len, int prot=PROT_RDWR)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Change the protection of the pages of the mapped region to &lt;prot&gt; starting at &lt;addr&gt; up to &lt;len&gt; bytes.</em> <a href="#a8">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#a9">seh_selector</a> (void *)</td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#a10">remap</a> (void *addr)</td></tr>
<tr><td nowrap align=right valign=top>virtual void *&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#a11">base_addr</a> (void) const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Return the base address of this memory pool.</em> <a href="#a11">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual void&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#a12">dump</a> (void) const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Dump the state of an object.</em> <a href="#a12">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Public Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#m0">ACE_ALLOC_HOOK_DECLARE</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Declare the dynamic allocation hooks.</em> <a href="#m0">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Protected Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>virtual size_t&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#b0">round_up</a> (size_t nbytes)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Implement the algorithm for rounding up the request to an appropriate chunksize.</em> <a href="#b0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#b1">commit_backing_store_name</a> (size_t rounded_bytes, off_t &amp;map_size)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Compute the new &lt;map_size&gt; of the backing store and commit the memory.</em> <a href="#b1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#b2">map_file</a> (off_t map_size)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Memory map the file up to &lt;map_size&gt; bytes.</em> <a href="#b2">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>virtual int&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#b3">handle_signal</a> (int signum, <a class="el" href="structsiginfo__t.html">siginfo_t</a> *, <a class="el" href="OS_8h.html#a371">ucontext_t</a> *)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Handle SIGSEGV and SIGBUS signals to remap shared memory properly.</em> <a href="#b3">More...</a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Protected Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classACE__Sig__Handler.html">ACE_Sig_Handler</a>&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#n0">signal_handler_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Handles SIGSEGV.</em> <a href="#n0">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="classACE__Mem__Map.html">ACE_Mem_Map</a>&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#n1">mmap_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Memory-mapping object.</em> <a href="#n1">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void *&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#n2">base_addr_</a></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#n3">use_fixed_addr_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Must we use the &lt;base_addr_&gt; or can we let mmap(2) select it?</em> <a href="#n3">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#n4">flags_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Flags passed into &lt;<a class="el" href="classACE__OS.html#z35_1">ACE_OS::mmap</a>&gt;.</em> <a href="#n4">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#n5">write_each_page_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Should we write a byte to each page to forceably allocate memory for this backing store?</em> <a href="#n5">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>off_t&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#n6">minimum_bytes_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>What the minimum bytes of the initial segment should be.</em> <a href="#n6">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a>&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#n7">backing_store_name_</a> [MAXPATHLEN+1]</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Name of the backing store where the shared memory pool is kept.</em> <a href="#n7">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#n8">guess_on_fault_</a></td></tr>
<tr><td nowrap align=right valign=top>LPSECURITY_ATTRIBUTES&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#n9">sa_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Security attributes object, only used on NT.</em> <a href="#n9">More...</a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top><a class="el" href="OS_8h.html#a354">mode_t</a>&nbsp;</td><td valign=bottom><a class="el" href="classACE__MMAP__Memory__Pool.html#n10">file_mode_</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>Protection mode for mmaped file.</em> <a href="#n10">More...</a><em></em></font><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Make a memory pool that is based on &lt;mmap(2)&gt;. This implementation allows memory to be shared between processes.
<p>
<hr><h2>Member Typedef Documentation</h2>
<a name="s0" doxytag="ACE_MMAP_Memory_Pool::OPTIONS"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> typedef <a class="el" href="classACE__MMAP__Memory__Pool__Options.html">ACE_MMAP_Memory_Pool_Options</a> ACE_MMAP_Memory_Pool::OPTIONS
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="ACE_MMAP_Memory_Pool::ACE_MMAP_Memory_Pool"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_MMAP_Memory_Pool::ACE_MMAP_Memory_Pool </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>backing_store_name</em> = 0, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>const <a class="el" href="classACE__MMAP__Memory__Pool.html#s0">OPTIONS</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>options</em> = 0</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Initialize the pool.
<p>
    </td>
  </tr>
</table>
<a name="a1" doxytag="ACE_MMAP_Memory_Pool::~ACE_MMAP_Memory_Pool"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_INLINE ACE_MMAP_Memory_Pool::~ACE_MMAP_Memory_Pool </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Destructor.
<p>
    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a3" doxytag="ACE_MMAP_Memory_Pool::acquire"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void * ACE_MMAP_Memory_Pool::acquire </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">size_t&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>nbytes</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>size_t &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>rounded_bytes</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Acquire at least &lt;nbytes&gt; from the memory pool. &lt;rounded_bytes&gt; is the actual number of bytes allocated. Also acquires an internal semaphore that ensures proper serialization of &lt;ACE_MMAP_Memory_Pool&gt; initialization across processes.     </td>
  </tr>
</table>
<a name="a11" doxytag="ACE_MMAP_Memory_Pool::base_addr"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_INLINE void * ACE_MMAP_Memory_Pool::base_addr </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Return the base address of this memory pool.
<p>
    </td>
  </tr>
</table>
<a name="b1" doxytag="ACE_MMAP_Memory_Pool::commit_backing_store_name"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_MMAP_Memory_Pool::commit_backing_store_name </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">size_t&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>rounded_bytes</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>off_t &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>map_size</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Compute the new &lt;map_size&gt; of the backing store and commit the memory.
<p>
    </td>
  </tr>
</table>
<a name="a12" doxytag="ACE_MMAP_Memory_Pool::dump"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void ACE_MMAP_Memory_Pool::dump </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const<code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Dump the state of an object.
<p>
    </td>
  </tr>
</table>
<a name="b3" doxytag="ACE_MMAP_Memory_Pool::handle_signal"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_MMAP_Memory_Pool::handle_signal </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>signum</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="structsiginfo__t.html">siginfo_t</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>siginfo</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap><a class="el" href="OS_8h.html#a371">ucontext_t</a> *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>u</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handle SIGSEGV and SIGBUS signals to remap shared memory properly.
<p>

<p>
Reimplemented from <a class="el" href="classACE__Event__Handler.html#a11">ACE_Event_Handler</a>.    </td>
  </tr>
</table>
<a name="a2" doxytag="ACE_MMAP_Memory_Pool::init_acquire"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void * ACE_MMAP_Memory_Pool::init_acquire </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">size_t&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>nbytes</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>size_t &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>rounded_bytes</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>first_time</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Ask system for initial chunk of shared memory.
<p>
    </td>
  </tr>
</table>
<a name="b2" doxytag="ACE_MMAP_Memory_Pool::map_file"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_MMAP_Memory_Pool::map_file </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">off_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>map_size</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Memory map the file up to &lt;map_size&gt; bytes.
<p>
    </td>
  </tr>
</table>
<a name="a8" doxytag="ACE_MMAP_Memory_Pool::protect"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_MMAP_Memory_Pool::protect </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>addr</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>len</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>prot</em> = PROT_RDWR</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Change the protection of the pages of the mapped region to &lt;prot&gt; starting at &lt;addr&gt; up to &lt;len&gt; bytes.
<p>
    </td>
  </tr>
</table>
<a name="a7" doxytag="ACE_MMAP_Memory_Pool::protect"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_MMAP_Memory_Pool::protect </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Basic__Types_8h.html#a38">ssize_t</a>&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>len</em> = -1, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>prot</em> = PROT_RDWR</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Change the protection of the pages of the mapped region to &lt;prot&gt; starting at &lt;this-&gt;base_addr_&gt; up to &lt;len&gt; bytes. If &lt;len&gt; == -1 then change protection of all pages in the mapped region.     </td>
  </tr>
</table>
<a name="a4" doxytag="ACE_MMAP_Memory_Pool::release"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_MMAP_Memory_Pool::release </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">int&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>destroy</em> = 1          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Instruct the memory pool to release all of its resources.
<p>
    </td>
  </tr>
</table>
<a name="a10" doxytag="ACE_MMAP_Memory_Pool::remap"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_MMAP_Memory_Pool::remap </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>addr</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Try to extend the virtual address space so that &lt;addr&gt; is now covered by the address mapping. The method succeeds and returns 0 if the backing store has adequate memory to cover this address. Otherwise, it returns -1. This method is typically called by a UNIX signal handler for SIGSEGV or a Win32 structured exception when another process has grown the backing store (and its mapping) and our process now incurs a fault because our mapping isn't in range (yet).     </td>
  </tr>
</table>
<a name="b0" doxytag="ACE_MMAP_Memory_Pool::round_up"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_INLINE size_t ACE_MMAP_Memory_Pool::round_up </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">size_t&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>nbytes</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Implement the algorithm for rounding up the request to an appropriate chunksize.
<p>
    </td>
  </tr>
</table>
<a name="a9" doxytag="ACE_MMAP_Memory_Pool::seh_selector"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_MMAP_Memory_Pool::seh_selector </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>ep</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Win32 Structural exception selector. The return value decides how to handle memory pool related structural exceptions. Returns 1, 0, or , -1.     </td>
  </tr>
</table>
<a name="a6" doxytag="ACE_MMAP_Memory_Pool::sync"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_MMAP_Memory_Pool::sync </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">void *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>addr</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>size_t&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>len</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>flags</em> = MS_SYNC</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sync the memory region to the backing store starting at &lt;addr_&gt;.
<p>

<p>
Reimplemented in <a class="el" href="classACE__Lite__MMAP__Memory__Pool.html#a3">ACE_Lite_MMAP_Memory_Pool</a>.    </td>
  </tr>
</table>
<a name="a5" doxytag="ACE_MMAP_Memory_Pool::sync"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_MMAP_Memory_Pool::sync </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top"><a class="el" href="Basic__Types_8h.html#a38">ssize_t</a>&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>len</em> = -1, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>int&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>flags</em> = MS_SYNC</td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Sync the memory region to the backing store starting at &lt;this-&gt;base_addr_&gt;.
<p>

<p>
Reimplemented in <a class="el" href="classACE__Lite__MMAP__Memory__Pool.html#a2">ACE_Lite_MMAP_Memory_Pool</a>.    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="m0" doxytag="ACE_MMAP_Memory_Pool::ACE_ALLOC_HOOK_DECLARE"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> ACE_MMAP_Memory_Pool::ACE_ALLOC_HOOK_DECLARE
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Declare the dynamic allocation hooks.
<p>
    </td>
  </tr>
</table>
<a name="n7" doxytag="ACE_MMAP_Memory_Pool::backing_store_name_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="ace__wchar_8h.html#a9">ACE_TCHAR</a> ACE_MMAP_Memory_Pool::backing_store_name_[MAXPATHLEN + 1]<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Name of the backing store where the shared memory pool is kept.
<p>
    </td>
  </tr>
</table>
<a name="n2" doxytag="ACE_MMAP_Memory_Pool::base_addr_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void* ACE_MMAP_Memory_Pool::base_addr_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Base of mapped region. If this has the value of 0 then the OS is free to select any address to map the file, otherwise this value is what the OS must try to use to mmap the file.     </td>
  </tr>
</table>
<a name="n10" doxytag="ACE_MMAP_Memory_Pool::file_mode_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="OS_8h.html#a354">mode_t</a> ACE_MMAP_Memory_Pool::file_mode_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Protection mode for mmaped file.
<p>
    </td>
  </tr>
</table>
<a name="n4" doxytag="ACE_MMAP_Memory_Pool::flags_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_MMAP_Memory_Pool::flags_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Flags passed into &lt;<a class="el" href="classACE__OS.html#z35_1">ACE_OS::mmap</a>&gt;.
<p>
    </td>
  </tr>
</table>
<a name="n8" doxytag="ACE_MMAP_Memory_Pool::guess_on_fault_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_MMAP_Memory_Pool::guess_on_fault_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Try to remap without knowing the faulting address. This parameter is ignored on platforms that know the faulting address (UNIX with SI_ADDR and Win32).     </td>
  </tr>
</table>
<a name="n6" doxytag="ACE_MMAP_Memory_Pool::minimum_bytes_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> off_t ACE_MMAP_Memory_Pool::minimum_bytes_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
What the minimum bytes of the initial segment should be.
<p>
    </td>
  </tr>
</table>
<a name="n1" doxytag="ACE_MMAP_Memory_Pool::mmap_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classACE__Mem__Map.html">ACE_Mem_Map</a> ACE_MMAP_Memory_Pool::mmap_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Memory-mapping object.
<p>
    </td>
  </tr>
</table>
<a name="n9" doxytag="ACE_MMAP_Memory_Pool::sa_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> LPSECURITY_ATTRIBUTES ACE_MMAP_Memory_Pool::sa_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Security attributes object, only used on NT.
<p>
    </td>
  </tr>
</table>
<a name="n0" doxytag="ACE_MMAP_Memory_Pool::signal_handler_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> <a class="el" href="classACE__Sig__Handler.html">ACE_Sig_Handler</a> ACE_MMAP_Memory_Pool::signal_handler_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Handles SIGSEGV.
<p>
    </td>
  </tr>
</table>
<a name="n3" doxytag="ACE_MMAP_Memory_Pool::use_fixed_addr_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_MMAP_Memory_Pool::use_fixed_addr_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Must we use the &lt;base_addr_&gt; or can we let mmap(2) select it?
<p>
    </td>
  </tr>
</table>
<a name="n5" doxytag="ACE_MMAP_Memory_Pool::write_each_page_"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int ACE_MMAP_Memory_Pool::write_each_page_<code> [protected]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
Should we write a byte to each page to forceably allocate memory for this backing store?
<p>
    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="Memory__Pool_8h.html">Memory_Pool.h</a><li><a class="el" href="Memory__Pool_8cpp.html">Memory_Pool.cpp</a><li><a class="el" href="Memory__Pool_8i.html">Memory_Pool.i</a></ul>
<hr><address><small>Generated on Wed Jan 15 19:10:39 2003 for ACE by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.gif" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.13.1 written by <a href="mailto:dimitri@stack.nl">Dimitri van Heesch</a>,
 &copy;&nbsp;1997-2001</small></address>
</body>
</html>
